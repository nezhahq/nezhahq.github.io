import{_ as e,c as t,o,a4 as s}from"./chunks/framework.BmdFiWrL.js";const k=JSON.parse('{"title":"DDNS","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"en_US/guide/ddns.md","filePath":"en_US/guide/ddns.md","lastUpdated":1756934130000}'),i={name:"en_US/guide/ddns.md"},a=s('<h1 id="ddns" tabindex="-1">DDNS <a class="header-anchor" href="#ddns" aria-label="Permalink to &quot;DDNS&quot;">​</a></h1><p>The DDNS feature is designed for servers using dynamic IP addresses. When an Agent server reports a new IP, the Dashboard automatically updates the DNS records based on your configuration.</p><h2 id="why-use-nezha-s-ddns-feature" tabindex="-1">Why Use Nezha&#39;s DDNS Feature? <a class="header-anchor" href="#why-use-nezha-s-ddns-feature" aria-label="Permalink to &quot;Why Use Nezha&#39;s DDNS Feature?&quot;">​</a></h2><ul><li><strong>Centralized Management</strong>: Conveniently manage DDNS settings in the Dashboard without deploying separate DDNS services on each server.</li><li><strong>Enhanced Security</strong>: Sensitive information is only stored on the Dashboard server, reducing the risk of data leaks.</li></ul><h2 id="configuration-instructions" tabindex="-1">Configuration Instructions <a class="header-anchor" href="#configuration-instructions" aria-label="Permalink to &quot;Configuration Instructions&quot;">​</a></h2><p>DDNS can be configured directly in the Dashboard&#39;s admin panel.</p><ol><li><p><strong>Access the DDNS Configuration Page</strong><br> Navigate to the <strong>DDNS</strong> option in the menu to open the configuration page.</p></li><li><p><strong>Create a New Configuration</strong><br> Click <strong>New Configuration</strong> and fill in the following details:</p><ul><li><strong>Name</strong>: A unique name for identifying the configuration.</li><li><strong>DDNS Provider</strong>: Select the DNS provider.</li><li><strong>Domain (comma-separated)</strong>: Enter the domains to be updated, separated by commas if multiple. Supports IDNs (Internationalized Domain Names).</li><li><strong>Max Retry Attempts</strong>: The maximum number of retries for DDNS updates (default: 3, range: 1–10).</li><li><strong>DDNS Credential 1</strong> and <strong>DDNS Credential 2</strong>: Optional credentials depending on the provider (see <a href="#provider-list">Provider List</a>).</li></ul></li><li><p><strong>Webhook-Specific Configuration</strong><br> If using the <code>webhook</code> provider, follow the <a href="#webhook-configuration-instructions">Webhook Configuration Instructions</a>.</p></li><li><p><strong>Enable Options</strong><br> Enable at least one of <strong>DDNS for IPv4</strong> or <strong>DDNS for IPv6</strong>; otherwise, updates will not occur.</p></li><li><p><strong>Associate with Servers</strong><br> After adding a DDNS configuration, modify the server settings to enable DDNS functionality:</p><ul><li><strong>Enable DDNS</strong>: Go to the <code>Servers</code> page and enable DDNS for the target server.</li><li><strong>DDNS Configuration</strong>: Select the appropriate DDNS configuration ID, which can be searched by name.</li></ul></li></ol><hr><h2 id="webhook-configuration-instructions" tabindex="-1">Webhook Configuration Instructions <a class="header-anchor" href="#webhook-configuration-instructions" aria-label="Permalink to &quot;Webhook Configuration Instructions&quot;">​</a></h2><p>Webhooks allow you to customize HTTP requests for third-party services or other specialized needs.</p><h3 id="options" tabindex="-1">Options <a class="header-anchor" href="#options" aria-label="Permalink to &quot;Options&quot;">​</a></h3><ul><li><strong>Webhook URL</strong>: The URL for the HTTP request, supporting placeholder substitution.</li><li><strong>Webhook Request Method</strong>: Choose from <code>GET</code>, <code>POST</code>, <code>PATCH</code>, <code>DELETE</code>, or <code>PUT</code>.</li><li><strong>Webhook Request Type</strong>: The request body format, either <code>JSON</code> or <code>Form</code>.</li><li><strong>Webhook Request Headers</strong>: Input headers in JSON format (nested headers are not supported).</li><li><strong>Webhook Request Body</strong>: Not used for <code>GET</code> and <code>DELETE</code>. For nested formats, use <code>JSON</code>.</li></ul><hr><h3 id="placeholders" tabindex="-1">Placeholders <a class="header-anchor" href="#placeholders" aria-label="Permalink to &quot;Placeholders&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Placeholder</th><th>Description</th></tr></thead><tbody><tr><td><code>#ip#</code></td><td>Host IP address</td></tr><tr><td><code>#domain#</code></td><td>Domain (one domain per request)</td></tr><tr><td><code>#type#</code></td><td>IP type: <code>&quot;ipv4&quot;</code> or <code>&quot;ipv6&quot;</code></td></tr><tr><td><code>#record#</code></td><td>Record type: <code>&quot;A&quot;</code> or <code>&quot;AAAA&quot;</code></td></tr><tr><td><code>#access_id#</code></td><td>DDNS Credential 1</td></tr><tr><td><code>#access_secret#</code></td><td>DDNS Credential 2</td></tr></tbody></table><hr><h3 id="oray-webhook-example" tabindex="-1">Oray Webhook Example <a class="header-anchor" href="#oray-webhook-example" aria-label="Permalink to &quot;Oray Webhook Example&quot;">​</a></h3><details><summary>Click to Expand/Collapse</summary><ul><li><strong>URL</strong>: <code>http://ddns.oray.com/ph/update?hostname=#domain#&amp;myip=#ip#</code></li><li><strong>Request Method</strong>: <code>GET</code></li><li><strong>Request Headers</strong>:<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>\n<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;Authorization&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Basic pass&quot;</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div>Here, <code>pass</code> is the Base64-encoded value of your <code>username:password</code>. For example, <code>user:pass</code> becomes <code>dXNlcjpwYXNzCg==</code>.</li><li><strong>Notes</strong>: Oray only supports A records, so only enable IPv4.</li></ul></details><hr><h2 id="provider-list" tabindex="-1">Provider List <a class="header-anchor" href="#provider-list" aria-label="Permalink to &quot;Provider List&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Provider</th><th>Credential 1 (ID)</th><th>Credential 2 (Secret)</th></tr></thead><tbody><tr><td><code>dummy</code></td><td>❌</td><td>❌</td></tr><tr><td><code>webhook</code></td><td>Optional</td><td>Optional</td></tr><tr><td><code>cloudflare</code></td><td>❌</td><td>✅</td></tr><tr><td><code>tencentcloud</code></td><td>✅</td><td>✅</td></tr><tr><td><code>he</code></td><td>❌</td><td>✅</td></tr></tbody></table><h3 id="cloudflare-token-permissions" tabindex="-1"><code>cloudflare</code> Token Permissions <a class="header-anchor" href="#cloudflare-token-permissions" aria-label="Permalink to &quot;`cloudflare` Token Permissions&quot;">​</a></h3><p>The Token needs to assign the following permissions to the target domain name: <code>Zone.Zone:Read</code>, <code>Zone.DNS:Edit</code></p><h3 id="obtaining-secret-for-he" tabindex="-1">Obtaining Secret for <code>he</code> <a class="header-anchor" href="#obtaining-secret-for-he" aria-label="Permalink to &quot;Obtaining Secret for `he`&quot;">​</a></h3><p>Provider <code>he</code> uses a DDNS key unique to each record as a Secret. Therefore, you must first create the corresponding A/AAAA record, check <code>Enable entry for dynamic dns</code>, and then set the new DDNS key in the corresponding DDNS field.</p><hr><h2 id="viewing-logs" tabindex="-1">Viewing Logs <a class="header-anchor" href="#viewing-logs" aria-label="Permalink to &quot;Viewing Logs&quot;">​</a></h2><p>The DDNS logs can be accessed on the Dashboard logs page. If configured correctly, logs will display update statuses. For example:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dashboard_1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 2024/03/16</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 23:16:25</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> NEZH</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Attempting</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> domain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ddns.example.com) DDNS (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1/3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dashboard_1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 2024/03/16</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 23:16:28</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> NEZH</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">A</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Successfully</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> updated</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> domain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ddns.example.com) DDNS</span></span></code></pre></div>',29),n=[a];function r(d,l,h,c,p,g){return o(),t("div",null,n)}const b=e(i,[["render",r]]);export{k as __pageData,b as default};
