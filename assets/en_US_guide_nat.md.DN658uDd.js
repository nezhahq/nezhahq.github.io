import{_ as e,c as t,o as n,a4 as o}from"./chunks/framework.BmdFiWrL.js";const m=JSON.parse('{"title":"NAT Traversal Configuration","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"en_US/guide/nat.md","filePath":"en_US/guide/nat.md","lastUpdated":1738926554000}'),r={name:"en_US/guide/nat.md"},a=o('<h1 id="nat-traversal-configuration" tabindex="-1">NAT Traversal Configuration <a class="header-anchor" href="#nat-traversal-configuration" aria-label="Permalink to &quot;NAT Traversal Configuration&quot;">​</a></h1><p>Nezha Monitoring provides a built-in NAT traversal feature that allows users to expose internal services (e.g., home OpenWrt routers, NAS devices) running on the Agent to the public network via the Dashboard. Currently, only plaintext HTTP tunneling is supported.</p><hr><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to &quot;Prerequisites&quot;">​</a></h2><p>Before configuring NAT traversal, ensure the following:</p><ol><li><p><strong>Install and Run the Agent</strong><br> The target device must have the Nezha Agent correctly installed and running, with an active connection to the Dashboard.</p></li><li><p><strong>Prepare a Public Domain Name</strong><br> Use subdomains such as <code>service-1.example.com</code> and ensure they point to the public IP of the Dashboard server.</p></li><li><p><strong>One-to-One Mapping</strong><br> Each domain can map to only one internal service. For multiple services, use separate domains, such as <code>service-2.example.com</code>.</p></li></ol><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>If using control panels like AApanel or other management tools, ensure the domain (e.g., <code>service-1.example.com</code>) is properly configured to point to the Dashboard service. Otherwise, access may fail.</p></div><hr><h2 id="configuration-steps" tabindex="-1">Configuration Steps <a class="header-anchor" href="#configuration-steps" aria-label="Permalink to &quot;Configuration Steps&quot;">​</a></h2><ol><li><p><strong>Access the Dashboard Admin Panel</strong><br> Navigate to the <strong>NAT Traversal</strong> section in the menu.</p></li><li><p><strong>Add a Tunnel Configuration</strong><br> Click the <strong>Add</strong> button and provide the following details:</p><ul><li><strong>Name</strong>: A custom name for the tunnel, such as <code>OpenWrt Login Page</code>.</li><li><strong>Server ID</strong>: The target Agent&#39;s ID.</li><li><strong>Local Service</strong>: The internal service address to expose, in the format <code>IP:port</code> (e.g., <code>127.0.0.1:80</code>).</li><li><strong>Bound Domain</strong>: The public domain name (e.g., <code>service-1.example.com</code>). If the Dashboard uses a non-standard port (e.g., <code>8008</code>), include the port in the configuration.</li></ul></li><li><p><strong>Save the Configuration</strong><br> Click <strong>Add</strong> to save the configuration. Wait for the tunnel to become active.</p></li><li><p><strong>Verify the Tunnel</strong><br> Access <code>http://service-1.example.com</code> in a browser to confirm the internal service is successfully exposed.</p></li></ol><hr><h2 id="important-notes" tabindex="-1">Important Notes <a class="header-anchor" href="#important-notes" aria-label="Permalink to &quot;Important Notes&quot;">​</a></h2><ol><li><p><strong>Maintain Connection</strong><br> The Agent&#39;s connection to the Dashboard is essential for the NAT traversal feature. If the connection is interrupted, the tunnel will become temporarily unavailable.</p></li><li><p><strong>Security Considerations</strong></p><ul><li>The tunnel transmits data over plaintext HTTP without encryption.</li><li>It is strongly recommended to enable TLS/SSL for: <ul><li><strong>Communication between the Agent and Dashboard</strong>.</li><li><strong>Connections between the Dashboard and external clients</strong>.</li></ul></li></ul></li></ol><hr>',14),i=[a];function s(l,c,d,h,u,p){return n(),t("div",null,i)}const f=e(r,[["render",s]]);export{m as __pageData,f as default};
