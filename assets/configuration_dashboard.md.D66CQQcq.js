import{_ as a,c as e,o as i,a4 as l}from"./chunks/framework.BmdFiWrL.js";const b=JSON.parse('{"title":"管理面板 (Dashboard) 配置","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"configuration/dashboard.md","filePath":"configuration/dashboard.md","lastUpdated":1756917506000}'),t={name:"configuration/dashboard.md"},o=l('<h1 id="管理面板-dashboard-配置" tabindex="-1">管理面板 (Dashboard) 配置 <a class="header-anchor" href="#管理面板-dashboard-配置" aria-label="Permalink to &quot;管理面板 (Dashboard) 配置&quot;">​</a></h1><p>管理面板配置格式为 YAML，其中标记 * 的项目只能通过配置文件修改，而其它的配置项则推荐通过管理后台修改，详见 <a href="/guide/settings.html">使用指南-管理面板配置-设置</a>。</p><hr><h2 id="选项" tabindex="-1">选项 <a class="header-anchor" href="#选项" aria-label="Permalink to &quot;选项&quot;">​</a></h2><ul><li><h5 id="language" tabindex="-1"><strong><code>language</code></strong> <a class="header-anchor" href="#language" aria-label="Permalink to &quot;**`language`**&quot;">​</a></h5><ul><li>Dashboard 本体程序的语言设置。</li><li>需要填写 POSIX 风格的区域代码，例如 <code>en_US</code>。支持的语言列表详见 <a href="https://hosted.weblate.org/projects/nezha/nezha-dashboard" target="_blank" rel="noreferrer">https://hosted.weblate.org/projects/nezha/nezha-dashboard</a>。</li></ul></li><li><h5 id="site-name" tabindex="-1"><strong><code>site_name</code></strong> <a class="header-anchor" href="#site-name" aria-label="Permalink to &quot;**`site_name`**&quot;">​</a></h5><ul><li>站点名称，例如 <code>Nezha</code>。</li></ul></li><li><h5 id="custom-code-custom-code-dashboard" tabindex="-1"><strong><code>custom_code / custom_code_dashboard</code></strong> <a class="header-anchor" href="#custom-code-custom-code-dashboard" aria-label="Permalink to &quot;**`custom_code / custom_code_dashboard`**&quot;">​</a></h5><ul><li>用户前端 / 管理前端的自定义代码。</li></ul></li><li><h5 id="install-host" tabindex="-1"><strong><code>install_host</code></strong> <a class="header-anchor" href="#install-host" aria-label="Permalink to &quot;**`install_host`**&quot;">​</a></h5><ul><li>指定安装命令的服务器地址，格式为 <code>host:port</code>。</li><li>这个选项的实际效果由前端实现，Dashboard 本体不会使用。</li></ul></li><li><h5 id="tls" tabindex="-1"><strong><code>tls</code></strong> <a class="header-anchor" href="#tls" aria-label="Permalink to &quot;**`tls`**&quot;">​</a></h5><ul><li>布尔值，指定安装命令是否启用 TLS。</li><li>这个选项的实际效果由前端实现，Dashboard 本体不会使用。</li></ul></li><li><h5 id="debug" tabindex="-1"><strong><code>debug</code></strong> * <a class="header-anchor" href="#debug" aria-label="Permalink to &quot;**`debug`** \\*&quot;">​</a></h5><ul><li>布尔值，是否打开调试模式。</li><li>开启后，会额外显示数据库日志及部分功能未正常工作时的错误日志。</li><li>同时 WebSocket 同源策略将允许来自回环地址的连接。</li></ul></li><li><h5 id="web-real-ip-header" tabindex="-1"><strong><code>web_real_ip_header</code></strong> <a class="header-anchor" href="#web-real-ip-header" aria-label="Permalink to &quot;**`web_real_ip_header`**&quot;">​</a></h5><ul><li>指定访客访问 Dashboard 的真实 IP 请求头，例如 <code>X-Real-Ip</code>。</li><li>填写之后将会自动启用内置 WAF，详见 <a href="/guide/settings.html#web-应用防火墙">Web 应用防火墙</a>。</li><li>如果选项值为 <code>NZ::Use-Peer-IP</code>，WAF 将会直接使用连接 IP，不再需要上层应用传递请求头。</li></ul></li><li><h5 id="agent-real-ip-header" tabindex="-1"><strong><code>agent_real_ip_header</code></strong> <a class="header-anchor" href="#agent-real-ip-header" aria-label="Permalink to &quot;**`agent_real_ip_header`**&quot;">​</a></h5><ul><li>指定 Agent 连接 Dashboard 的真实 IP 请求头，例如 <code>X-Real-Ip</code>。</li><li>如果选项值为 <code>NZ::Use-Peer-IP</code>，Dashboard 将会直接使用连接 IP，不再需要上层应用传递请求头。</li></ul></li><li><h5 id="user-template-admin-template" tabindex="-1"><strong><code>user_template / admin_template</code></strong> <a class="header-anchor" href="#user-template-admin-template" aria-label="Permalink to &quot;**`user_template / admin_template`**&quot;">​</a></h5><ul><li>默认使用的前端主题。</li><li>只支持填写已经内置的主题路径，详见 <a href="https://github.com/nezhahq/nezha/blob/master/service/singleton/frontend-templates.yaml" target="_blank" rel="noreferrer">service/singleton/frontend-templates.yaml</a>。</li></ul></li><li><h5 id="location" tabindex="-1"><strong><code>location</code></strong> * <a class="header-anchor" href="#location" aria-label="Permalink to &quot;**`location`** \\*&quot;">​</a></h5><ul><li>程序使用的时区，主要影响通知及数据库查询。</li><li>默认为 <code>Asia/Shanghai</code>。</li></ul></li><li><h5 id="force-auth" tabindex="-1"><strong><code>force_auth</code></strong> * <a class="header-anchor" href="#force-auth" aria-label="Permalink to &quot;**`force_auth`** \\*&quot;">​</a></h5><ul><li>布尔值，是否启用 “强制验证”。</li><li>启用后需要登录才能查看服务器及服务监控相关数据。</li></ul></li><li><h5 id="agent-secret-key" tabindex="-1"><strong><code>agent_secret_key</code></strong> * <a class="header-anchor" href="#agent-secret-key" aria-label="Permalink to &quot;**`agent_secret_key`** \\*&quot;">​</a></h5><ul><li>Agent 的连接密钥。</li><li>较新的版本中已不再使用，而是改为将连接密钥与用户进行绑定，详见 <a href="/guide/user.html#连接密钥">连接密钥 </a>。</li></ul></li><li><h5 id="jwt-timeout" tabindex="-1"><strong><code>jwt_timeout</code></strong> * <a class="header-anchor" href="#jwt-timeout" aria-label="Permalink to &quot;**`jwt_timeout`** \\*&quot;">​</a></h5><ul><li>整数，指定 JWT 的过期时间（小时）。</li><li>默认值为 <code>1</code>。</li></ul></li><li><h5 id="enable-plain-ip-in-notification" tabindex="-1"><strong><code>enable_plain_ip_in_notification</code></strong> <a class="header-anchor" href="#enable-plain-ip-in-notification" aria-label="Permalink to &quot;**`enable_plain_ip_in_notification`**&quot;">​</a></h5><ul><li>布尔值，通知是否发送原始 IP。</li><li>默认为 <code>false</code>，即发送脱敏后的 IP（例如 1.**.1）。</li></ul></li><li><h5 id="enable-ip-change-notification" tabindex="-1"><strong><code>enable_ip_change_notification</code></strong> <a class="header-anchor" href="#enable-ip-change-notification" aria-label="Permalink to &quot;**`enable_ip_change_notification`**&quot;">​</a></h5><ul><li>布尔值，是否启用 IP 变更通知。</li></ul></li><li><h5 id="ip-change-notification-group-id" tabindex="-1"><strong><code>ip_change_notification_group_id</code></strong> <a class="header-anchor" href="#ip-change-notification-group-id" aria-label="Permalink to &quot;**`ip_change_notification_group_id`**&quot;">​</a></h5><ul><li>整数，指定 IP 变更通知的通知组。</li></ul></li><li><h5 id="cover" tabindex="-1"><strong><code>cover</code></strong> <a class="header-anchor" href="#cover" aria-label="Permalink to &quot;**`cover`**&quot;">​</a></h5><ul><li>整数，指定 IP 变更通知的覆盖范围。</li><li><code>0</code> 为覆盖全部，<code>1</code> 为忽略全部。</li></ul></li><li><h5 id="ignored-ip-notification" tabindex="-1"><strong><code>ignored_ip_notification</code></strong> <a class="header-anchor" href="#ignored-ip-notification" aria-label="Permalink to &quot;**`ignored_ip_notification`**&quot;">​</a></h5><ul><li>指定 IP 变更通知的服务器 ID，如覆盖范围为 覆盖全部 则排除这些服务器，如为 忽略全部 则只会监控这些服务器。</li><li>使用逗号分隔，例如 <code>1,2,3</code>。</li></ul></li><li><h5 id="avg-ping-count" tabindex="-1"><strong><code>avg_ping_count</code></strong> * <a class="header-anchor" href="#avg-ping-count" aria-label="Permalink to &quot;**`avg_ping_count`** \\*&quot;">​</a></h5><ul><li>整数，当内存中 TCPing / ICMP Ping 服务数据条目达到此值时将会取平均值并写入数据库。</li><li>默认为 <code>2</code>，调高此值可以减少数据库的存储量。</li></ul></li><li><h5 id="dns-servers" tabindex="-1"><strong><code>dns_servers</code></strong> <a class="header-anchor" href="#dns-servers" aria-label="Permalink to &quot;**`dns_servers`**&quot;">​</a></h5><ul><li>DDNS 功能使用的 DNS 服务器列表。</li><li>如不填则使用内置列表。</li></ul></li><li><h5 id="listen-port" tabindex="-1"><strong><code>listen_port</code></strong> * <a class="header-anchor" href="#listen-port" aria-label="Permalink to &quot;**`listen_port`** \\*&quot;">​</a></h5><ul><li>Dashboard 监听端口（HTTP）。</li></ul></li><li><h5 id="listen-host" tabindex="-1"><strong><code>listen_host</code></strong> * <a class="header-anchor" href="#listen-host" aria-label="Permalink to &quot;**`listen_host`** \\*&quot;">​</a></h5><ul><li>Dashboard 监听地址。</li></ul></li><li><h5 id="oauth2" tabindex="-1"><strong><code>oauth2</code></strong> * <a class="header-anchor" href="#oauth2" aria-label="Permalink to &quot;**`oauth2`** \\*&quot;">​</a></h5><ul><li>OAuth 2.0 的相关配置，详见 <a href="/guide/q14.html">设置 OAuth 2.0 绑定</a>。</li></ul></li><li><h5 id="https" tabindex="-1"><strong><code>https</code></strong> * <a class="header-anchor" href="#https" aria-label="Permalink to &quot;**`https`** \\*&quot;">​</a></h5><ul><li>HTTPS 服务器配置。</li><li>需填写以下字段： <ul><li><code>listen_port</code>: 监听端口</li><li><code>tls_cert_path</code>: TLS 证书路径</li><li><code>tls_key_path</code>: TLS 证书私钥路径</li><li><code>insecure_tls</code>：布尔值，是否关闭证书完整性检查</li></ul></li></ul></li></ul><hr><h2 id="应用" tabindex="-1">应用 <a class="header-anchor" href="#应用" aria-label="Permalink to &quot;应用&quot;">​</a></h2><p>在修改了配置文件后，需要手动重启 Dashboard 以应用，不同的安装方式的重启方法不同，详情如下：</p><h3 id="docker-安装" tabindex="-1">Docker 安装 <a class="header-anchor" href="#docker-安装" aria-label="Permalink to &quot;Docker 安装&quot;">​</a></h3><p>可以直接重启 Docker 容器：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nezha-dashboard</span></span></code></pre></div><p>或是重新创建容器：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt/nezha/dashboard</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> down</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span></span></code></pre></div><h3 id="独立安装" tabindex="-1">独立安装 <a class="header-anchor" href="#独立安装" aria-label="Permalink to &quot;独立安装&quot;">​</a></h3><p>以 <code>systemd</code> 为例：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nezha-dashboard.service</span></span></code></pre></div>',16),s=[o];function n(r,d,h,c,u,p){return i(),e("div",null,s)}const _=a(t,[["render",n]]);export{b as __pageData,_ as default};
