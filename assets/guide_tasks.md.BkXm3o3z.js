import{_ as o,c as t,o as i,a4 as e}from"./chunks/framework.BmdFiWrL.js";const _=JSON.parse('{"title":"任务管理","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"guide/tasks.md","filePath":"guide/tasks.md","lastUpdated":1733426481000}'),a={name:"guide/tasks.md"},s=e('<h1 id="任务管理" tabindex="-1">任务管理 <a class="header-anchor" href="#任务管理" aria-label="Permalink to &quot;任务管理&quot;">​</a></h1><p><strong>任务管理区域支持设置计划任务、触发任务以及多服务器批量执行任务</strong>。<br> 哪吒监控允许推送命令到 Agent 执行，支持多种场景，包括且不仅限于：</p><ul><li>定期使用 <code>restic</code>、<code>rclone</code> 备份服务器数据。</li><li>定期重启服务以重置网络连接。</li><li>配合通知规则触发任务，例如在 CPU 长时间高占用时运行某个脚本。</li></ul><hr><h2 id="使用方法" tabindex="-1">使用方法 <a class="header-anchor" href="#使用方法" aria-label="Permalink to &quot;使用方法&quot;">​</a></h2><h3 id="添加任务" tabindex="-1">添加任务 <a class="header-anchor" href="#添加任务" aria-label="Permalink to &quot;添加任务&quot;">​</a></h3><ol><li><p><strong>进入任务页面</strong><br> 在管理面板中进入 <strong><code>任务</code></strong> 页，点击 <strong><code>+</code></strong> 按钮新增任务。</p></li><li><p><strong>填写任务参数</strong><br> 添加任务时需要配置以下参数：</p><ul><li><strong>名称</strong>：为任务自定义一个名称，便于管理和识别。</li><li><strong>任务类型</strong>： <ul><li><strong>计划任务</strong>：按设置的计划时间周期性执行任务。</li><li><strong>触发任务</strong>：任务仅通过 API 或通知规则触发，每次触发执行一次。</li></ul></li><li><strong>计划</strong>：任务执行的时间计划（仅计划任务生效），格式为：<code>秒 分 时 天 月 星期</code>。<br> 详情参考 <a href="https://pkg.go.dev/github.com/robfig/cron/v3#hdr-CRON_Expression_Format" target="_blank" rel="noreferrer">计划表达式格式</a>。<br> 示例：<code>0 0 3 * * *</code> 表示每天凌晨 3 点执行。</li><li><strong>命令</strong>：需要执行的命令。 <ul><li>命令格式与 Shell/Bat 脚本相同，多个命令可用 <code>&amp;&amp;</code>（Linux）或 <code>&amp;</code>（Windows）连接。</li><li>示例：重启服务器输入 <code>reboot</code>。</li></ul></li><li><strong>覆盖范围</strong> 和 <strong>特定服务器</strong>：指定哪些 Agent 执行任务： <ul><li>可选择规则覆盖范围或特定服务器。</li><li>对于触发任务，可选择“在触发通知的服务器上执行”。</li></ul></li><li><strong>通知方式组</strong>：选择已在 <strong><code>通知</code></strong> 页配置的通知方式，详见 <a href="/guide/notifications.html#灵活的通知方式">通知方式配置</a>。</li></ul></li><li><p><strong>提交任务</strong><br> 填写完成后，点击 <strong><code>提交</code></strong> 保存任务。</p></li></ol><hr><h2 id="管理任务" tabindex="-1">管理任务 <a class="header-anchor" href="#管理任务" aria-label="Permalink to &quot;管理任务&quot;">​</a></h2><p>如需管理已有任务：</p><ol><li>前往 <strong><code>任务</code></strong> 页，找到目标任务。</li><li>使用右侧的功能图标： <ul><li><strong>立即执行</strong>：忽略计划时间，立即执行任务。</li><li><strong>编辑</strong>：修改任务配置。</li><li><strong>删除</strong>：移除该任务。</li></ul></li></ol><hr><h2 id="常见问题" tabindex="-1">常见问题 <a class="header-anchor" href="#常见问题" aria-label="Permalink to &quot;常见问题&quot;">​</a></h2><h3 id="_1-xxx-命令找不到" tabindex="-1">1. <strong>xxx 命令找不到</strong> <a class="header-anchor" href="#_1-xxx-命令找不到" aria-label="Permalink to &quot;1. **xxx 命令找不到**&quot;">​</a></h3><ul><li>运行失败提示 “xxx 命令找不到”，通常是因为 PATH 环境变量未正确加载。</li><li>解决方法： <ul><li>在 Linux 中，可在命令前加 <code>source ~/.bashrc</code>：<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.bashrc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">your_command</span></span></code></pre></div></li><li>或直接使用绝对路径执行命令（例如 <code>/usr/bin/command</code>）。</li></ul></li></ul>',15),l=[s];function r(n,d,c,h,g,p){return i(),t("div",null,l)}const b=o(a,[["render",r]]);export{_ as __pageData,b as default};
