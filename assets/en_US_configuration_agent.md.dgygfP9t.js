import{_ as e,c as i,o as a,a4 as t}from"./chunks/framework.BmdFiWrL.js";const b=JSON.parse('{"title":"Agent Configuration","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"en_US/configuration/agent.md","filePath":"en_US/configuration/agent.md","lastUpdated":1742391396000}'),s={name:"en_US/configuration/agent.md"},o=t('<h1 id="agent-configuration" tabindex="-1">Agent Configuration <a class="header-anchor" href="#agent-configuration" aria-label="Permalink to &quot;Agent Configuration&quot;">​</a></h1><p>The Agent configuration file is in YAML format.</p><p>In the admin frontend, you can modify the Agent&#39;s configuration and apply it directly; you can also batch apply options through the API, see the <a href="/en_US/developer/api.html">API documentation</a> for details.</p><hr><h2 id="options" tabindex="-1">Options <a class="header-anchor" href="#options" aria-label="Permalink to &quot;Options&quot;">​</a></h2><ul><li><h5 id="client-secret" tabindex="-1"><strong><code>client_secret</code></strong> <a class="header-anchor" href="#client-secret" aria-label="Permalink to &quot;**`client_secret`**&quot;">​</a></h5><ul><li>The client secret used for secure communication with the Dashboard.</li><li>This parameter must match the configuration in the Dashboard to enable proper communication.</li></ul></li><li><h5 id="debug" tabindex="-1"><strong><code>debug</code></strong> <a class="header-anchor" href="#debug" aria-label="Permalink to &quot;**`debug`**&quot;">​</a></h5><ul><li>When set to <code>true</code>, enables logging.</li></ul></li><li><h5 id="disable-auto-update" tabindex="-1"><strong><code>disable_auto_update</code></strong> <a class="header-anchor" href="#disable-auto-update" aria-label="Permalink to &quot;**`disable_auto_update`**&quot;">​</a></h5><ul><li>When set to <code>true</code>, disables the automatic update feature, enhancing system stability and security.</li></ul></li><li><h5 id="disable-command-execute" tabindex="-1"><strong><code>disable_command_execute</code></strong> <a class="header-anchor" href="#disable-command-execute" aria-label="Permalink to &quot;**`disable_command_execute`**&quot;">​</a></h5><ul><li>When set to <code>true</code>, rejects <strong>Command Execution</strong>, <strong>Online Terminal</strong> and <strong>File Manager</strong> tasks.</li></ul></li><li><h5 id="disable-force-update" tabindex="-1"><strong><code>disable_force_update</code></strong> <a class="header-anchor" href="#disable-force-update" aria-label="Permalink to &quot;**`disable_force_update`**&quot;">​</a></h5><ul><li>When set to <code>true</code>, disables forced updates, allowing only manual updates.</li></ul></li><li><h5 id="disable-nat" tabindex="-1"><strong><code>disable_nat</code></strong> <a class="header-anchor" href="#disable-nat" aria-label="Permalink to &quot;**`disable_nat`**&quot;">​</a></h5><ul><li>When set to <code>true</code>, rejects <strong>NAT</strong> tasks.</li></ul></li><li><h5 id="disable-send-query" tabindex="-1"><strong><code>disable_send_query</code></strong> <a class="header-anchor" href="#disable-send-query" aria-label="Permalink to &quot;**`disable_send_query`**&quot;">​</a></h5><ul><li>When set to <code>true</code>, rejects <strong>TCPing</strong>, <strong>ICMP Ping</strong>, and <strong>HTTP GET</strong> tasks.</li></ul></li><li><h5 id="gpu" tabindex="-1"><strong><code>gpu</code></strong> <a class="header-anchor" href="#gpu" aria-label="Permalink to &quot;**`gpu`**&quot;">​</a></h5><ul><li>When set to <code>true</code>, enables GPU monitoring.</li><li>Note: Additional dependencies may be required for GPU monitoring. See the <a href="/en_US/guide/q9.html">GPU Monitoring Guide</a> for details.</li></ul></li><li><h5 id="insecure-tls" tabindex="-1"><strong><code>insecure_tls</code></strong> <a class="header-anchor" href="#insecure-tls" aria-label="Permalink to &quot;**`insecure_tls`**&quot;">​</a></h5><ul><li>When set to <code>true</code>, disables certificate validation, suitable for scenarios using self-signed certificates.</li></ul></li><li><h5 id="ip-report-period" tabindex="-1"><strong><code>ip_report_period</code></strong> <a class="header-anchor" href="#ip-report-period" aria-label="Permalink to &quot;**`ip_report_period`**&quot;">​</a></h5><ul><li>Sets the interval (in seconds) for local IP updates. The default is <code>1800</code> seconds (30 minutes).</li><li>The valid minimum value is <code>30</code>.</li></ul></li><li><h5 id="report-delay" tabindex="-1"><strong><code>report_delay</code></strong> <a class="header-anchor" href="#report-delay" aria-label="Permalink to &quot;**`report_delay`**&quot;">​</a></h5><ul><li>Sets the interval (in seconds) for system information reporting. The default is <code>3</code> seconds (valid range: 1-4 seconds).</li></ul></li><li><h5 id="server" tabindex="-1"><strong><code>server</code></strong> <a class="header-anchor" href="#server" aria-label="Permalink to &quot;**`server`**&quot;">​</a></h5><ul><li>The domain or IP address of the Dashboard for communication, including the port number.</li></ul></li><li><h5 id="skip-connection-count" tabindex="-1"><strong><code>skip_connection_count</code></strong> <a class="header-anchor" href="#skip-connection-count" aria-label="Permalink to &quot;**`skip_connection_count`**&quot;">​</a></h5><ul><li>When set to <code>true</code>, disables monitoring of network connection counts, suitable for servers with high connection volumes or limited resources.</li></ul></li><li><h5 id="skip-procs-count" tabindex="-1"><strong><code>skip_procs_count</code></strong> <a class="header-anchor" href="#skip-procs-count" aria-label="Permalink to &quot;**`skip_procs_count`**&quot;">​</a></h5><ul><li>When set to <code>true</code>, disables monitoring of process counts to lower resource usage.</li></ul></li><li><h5 id="temperature" tabindex="-1"><strong><code>temperature</code></strong> <a class="header-anchor" href="#temperature" aria-label="Permalink to &quot;**`temperature`**&quot;">​</a></h5><ul><li>When set to <code>true</code>, enables hardware temperature monitoring (only supported for specific hardware; unavailable for some VPS instances).</li></ul></li><li><h5 id="tls" tabindex="-1"><strong><code>tls</code></strong> <a class="header-anchor" href="#tls" aria-label="Permalink to &quot;**`tls`**&quot;">​</a></h5><ul><li>When set to <code>true</code>, enables SSL/TLS encryption for communication between the Agent and the Dashboard.</li><li>Enable this option if the Agent uses an SSL/TLS-enabled Nginx reverse proxy.</li></ul></li><li><h5 id="hard-drive-partition-allowlist" tabindex="-1"><strong><code>hard_drive_partition_allowlist</code></strong> <a class="header-anchor" href="#hard-drive-partition-allowlist" aria-label="Permalink to &quot;**`hard_drive_partition_allowlist`**&quot;">​</a></h5><ul><li>A string array specifying the list of hard drive partitions to monitor.</li><li>Monitoring will only include the listed partitions.</li></ul></li><li><h5 id="nic-allowlist" tabindex="-1"><strong><code>nic_allowlist</code></strong> <a class="header-anchor" href="#nic-allowlist" aria-label="Permalink to &quot;**`nic_allowlist`**&quot;">​</a></h5><ul><li>A <code>map[string]bool</code> type whitelist specifying the network interfaces to monitor.</li><li>The key is the network interface name, and the value is <code>true</code> for monitoring and <code>false</code> for exclusion.</li><li>If not specified, all available interfaces are monitored by default.</li></ul></li><li><h5 id="use-gitee-to-upgrade" tabindex="-1"><strong><code>use_gitee_to_upgrade</code></strong> <a class="header-anchor" href="#use-gitee-to-upgrade" aria-label="Permalink to &quot;**`use_gitee_to_upgrade`**&quot;">​</a></h5><ul><li>When set to <code>true</code>, uses the Gitee repository as the automatic update source, better suited for servers in mainland China.</li></ul></li><li><h5 id="use-ipv6-country-code" tabindex="-1"><strong><code>use_ipv6_country_code</code></strong> <a class="header-anchor" href="#use-ipv6-country-code" aria-label="Permalink to &quot;**`use_ipv6_country_code`**&quot;">​</a></h5><ul><li>When set to <code>true</code>, forces the use of IPv6 addresses for country code queries (default uses IPv4).</li></ul></li><li><h5 id="uuid" tabindex="-1"><strong><code>uuid</code></strong> <a class="header-anchor" href="#uuid" aria-label="Permalink to &quot;**`uuid`**&quot;">​</a></h5><ul><li>The unique identifier for the current Agent, used by the Dashboard to recognize the data source.</li><li>To replace an existing Agent in the Dashboard, manually set this parameter.</li></ul></li><li><h5 id="dns" tabindex="-1"><strong><code>dns</code></strong> <a class="header-anchor" href="#dns" aria-label="Permalink to &quot;**`dns`**&quot;">​</a></h5><ul><li>A string array to set custom DNS server lists.</li><li>When specified, the Agent will prioritize these DNS servers for domain resolution.</li></ul></li><li><h5 id="custom-ip-api" tabindex="-1"><strong><code>custom_ip_api</code></strong> <a class="header-anchor" href="#custom-ip-api" aria-label="Permalink to &quot;**`custom_ip_api`**&quot;">​</a></h5><ul><li>A string array specifying custom IP query API endpoints.</li><li>The Agent will use these APIs to retrieve the server&#39;s public IP information.</li></ul></li><li><h5 id="self-update-period" tabindex="-1"><strong><code>self_update_period</code></strong> <a class="header-anchor" href="#self-update-period" aria-label="Permalink to &quot;**`self_update_period`**&quot;">​</a></h5><ul><li>Set the update interval manually (in minutes).</li><li>Defaults to a random value between <code>30</code> and <code>90</code>.</li></ul></li></ul><hr><h2 id="apply-config" tabindex="-1">Apply Config <a class="header-anchor" href="#apply-config" aria-label="Permalink to &quot;Apply Config&quot;">​</a></h2><p>After modifying the parameters in the configuration file, you need to restart the Agent service for the changes to take effect. You can use the Agent&#39;s built-in service management or restart manually.</p><h3 id="built-in-service-management" tabindex="-1">Built-in Service Management <a class="header-anchor" href="#built-in-service-management" aria-label="Permalink to &quot;Built-in Service Management&quot;">​</a></h3><p>You can directly enter the following command to restart the default Agent service:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./agent</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span></span></code></pre></div><p>For multiple Agent service scenarios, you can specify the corresponding configuration file:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./agent</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> service</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./config-6sc1f.yml</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span></span></code></pre></div><h3 id="manual" tabindex="-1">Manual <a class="header-anchor" href="#manual" aria-label="Permalink to &quot;Manual&quot;">​</a></h3><ol><li><p><strong>Restart the Service</strong><br> Use the following command to restart the default Agent service:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nezha-agent.service</span></span></code></pre></div></li><li><p><strong>For Multiple Agent Services</strong><br> If running multiple Agent services on the same server, first list all Agent services:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list-units</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --type=service</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nezha-agent</span></span></code></pre></div><p>Then restart each Agent service using the following command:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">service-nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><p>Replace <code>&lt;service-name&gt;</code> with the actual service name, such as <code>nezha-agent@2.service</code>.</p></li></ol>',16),n=[o];function l(r,d,c,h,u,p){return a(),i("div",null,n)}const m=e(s,[["render",l]]);export{b as __pageData,m as default};
