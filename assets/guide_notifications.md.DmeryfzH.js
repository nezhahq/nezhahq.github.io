import{_ as s,c as i,o as t,a4 as a}from"./chunks/framework.BmdFiWrL.js";const c=JSON.parse('{"title":"通知设置","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"guide/notifications.md","filePath":"guide/notifications.md","lastUpdated":1733081356000}'),n={name:"guide/notifications.md"},l=a(`<h1 id="通知设置" tabindex="-1">通知设置 <a class="header-anchor" href="#通知设置" aria-label="Permalink to &quot;通知设置&quot;">​</a></h1><p>哪吒监控支持对服务器的负载、CPU、内存、硬盘、流量、月流量、进程数和连接数进行监控，并在达到用户设定的阈值时发送通知。</p><h2 id="灵活的通知方式" tabindex="-1">灵活的通知方式 <a class="header-anchor" href="#灵活的通知方式" aria-label="Permalink to &quot;灵活的通知方式&quot;">​</a></h2><ul><li>在面板消息中，<code>#DATETIME#</code> 代表事件发生的时间戳，当通知被触发时，会自动替换为实际时间。</li><li><code>#NEZHA#</code> 是面板消息占位符，触发通知时会自动替换为实际消息内容。</li><li><strong>请求体内容格式：</strong><ul><li>当请求类型为 <strong>FORM</strong> 时，使用 <code>key:value</code> 的形式，<code>value</code> 中可包含占位符，通知时会自动替换。</li><li>当请求类型为 <strong>JSON</strong> 时，会进行简单的字符串替换后直接提交到 <code>URL</code>。</li></ul></li><li><strong>URL</strong> 中也可包含占位符，请求时会进行字符串替换。</li></ul><p><strong>请参考以下通知方式示例，您也可以根据需求自定义推送方式。</strong></p><hr><h3 id="bark-示例" tabindex="-1">Bark 示例 <a class="header-anchor" href="#bark-示例" aria-label="Permalink to &quot;Bark 示例&quot;">​</a></h3><details><summary>点击展开/收起</summary><ul><li><strong>名称</strong>：Bark</li><li><strong>URL 组成</strong>： <ul><li>GET 请求：<code>/:key/:body</code> 或 <code>/:key/:title/:body</code> 或 <code>/:key/:category/:title/:body</code></li><li>POST 请求：<code>/push</code></li></ul></li><li><strong>请求方式</strong>： <ul><li>GET 或 POST</li></ul></li><li><strong>请求类型</strong>： <ul><li>GET 请求：默认</li><li>POST 请求：<code>form</code></li></ul></li><li><strong>Body</strong>： <ul><li>GET 请求：空</li><li>POST 请求：<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;title&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;#SERVER.NAME#&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;device_key&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;xxxxxxxxx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;body&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;#NEZHA#&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;icon&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://xxxxxxxx/nz.png&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ul></li></ul></details><hr><h3 id="slack-示例-贡献者-白歌" tabindex="-1">Slack 示例（贡献者：<a href="https://github.com/cantoblanco" target="_blank" rel="noreferrer">@白歌</a>） <a class="header-anchor" href="#slack-示例-贡献者-白歌" aria-label="Permalink to &quot;Slack 示例（贡献者：[@白歌](https://github.com/cantoblanco)）&quot;">​</a></h3><details><summary>点击展开/收起</summary><h4 id="获取-url-参数" tabindex="-1">获取 URL 参数 <a class="header-anchor" href="#获取-url-参数" aria-label="Permalink to &quot;获取 URL 参数&quot;">​</a></h4><ol><li><strong>创建 Slack App</strong>：在 <a href="https://api.slack.com/apps" target="_blank" rel="noreferrer">Slack API</a> 创建一个新的 App。</li><li><strong>添加 Incoming Webhook</strong>：在 App 的功能页添加 Incoming Webhooks，并激活。</li><li><strong>生成 Webhook URL</strong>：点击 “Add New Webhook to Workspace”，选择一个 Channel，授权后获得 Webhook URL。</li></ol><p><strong>通知配置：</strong></p><ul><li><strong>名称</strong>：Slack</li><li><strong>URL</strong>：<code>https://hooks.slack.com/services/XXXXXXXXX/XXXXXXXXX/XXXXXXXXXXXXXXXXXXXXXXXX</code></li><li><strong>请求方式</strong>：<code>POST</code></li><li><strong>请求类型</strong>：<code>JSON</code></li><li><strong>Body</strong>：<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;text&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;#NEZHA#&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ul></details><hr><h3 id="server-酱示例" tabindex="-1">Server 酱示例 <a class="header-anchor" href="#server-酱示例" aria-label="Permalink to &quot;Server 酱示例&quot;">​</a></h3><details><summary>点击展开/收起</summary><ul><li><p><strong>简单示例：</strong></p><ul><li><strong>名称</strong>：Server 酱</li><li><strong>URL</strong>：<code>https://sc.ftqq.com/SCUrandomkeys.send?title=哪吒通知信息&amp;desp=#NEZHA#</code></li><li><strong>请求方式</strong>：<code>GET</code></li><li><strong>请求类型</strong>：默认</li><li><strong>Body</strong>：空</li></ul></li><li><p><strong>进阶示例：</strong></p><ul><li><strong>名称</strong>：Server 酱</li><li><strong>URL</strong>：<code>https://sc.ftqq.com/SCUrandomkeys.send</code></li><li><strong>请求方式</strong>：<code>POST</code></li><li><strong>请求类型</strong>：<code>FORM</code></li><li><strong>Body</strong>：<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;title&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;#SERVER.NAME#&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;desp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;**#NEZHA#</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">平均负载: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">#SERVER.LOAD1#</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">#SERVER.LOAD5#</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">#SERVER.LOAD15#</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;\\n\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">## [点击访问面板](https://你的面板域名)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">![logo](https://raw.githubusercontent.com/naiba/nezha/master/resource/static/brand.svg)&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ul><p><strong>通知效果预览：</strong></p><p><img src="https://github.com/iilemon/nezhahq.github.io/blob/main/docs/images/photo_2023-03-16_00-22-47a.jpg?raw=true" alt="Server 酱通知效果"></p></li></ul></details><hr><h3 id="telegram-示例-贡献者-白歌" tabindex="-1">Telegram 示例（贡献者：<a href="https://github.com/cantoblanco" target="_blank" rel="noreferrer">@白歌</a>） <a class="header-anchor" href="#telegram-示例-贡献者-白歌" aria-label="Permalink to &quot;Telegram 示例（贡献者：[@白歌](https://github.com/cantoblanco)）&quot;">​</a></h3><details><summary>点击展开/收起</summary><h4 id="获取-url-参数-1" tabindex="-1">获取 URL 参数 <a class="header-anchor" href="#获取-url-参数-1" aria-label="Permalink to &quot;获取 URL 参数&quot;">​</a></h4><ol><li><strong>获取机器人 Token</strong>：与 <a href="https://t.me/BotFather" target="_blank" rel="noreferrer">@BotFather</a> 对话，发送 <code>/newbot</code> 创建新机器人，获取 Token。</li><li><strong>获取用户 ID</strong>：与 <a href="https://t.me/userinfobot" target="_blank" rel="noreferrer">@userinfobot</a> 对话，获取你的用户 ID。</li><li><strong>与机器人对话</strong>：先与新创建的机器人发送一条消息，确保机器人可以发送消息给你。</li></ol><p><strong>通知配置：</strong></p><ul><li><strong>名称</strong>：Telegram</li><li><strong>URL</strong>：<code>https://api.telegram.org/bot&lt;你的机器人Token&gt;/sendMessage?chat_id=&lt;你的用户ID&gt;&amp;text=#NEZHA#</code></li><li><strong>请求方式</strong>：<code>GET</code></li><li><strong>请求类型</strong>：默认</li><li><strong>Body</strong>：空</li></ul><p><strong>注意</strong>：将 <code>&lt;你的机器人Token&gt;</code> 和 <code>&lt;你的用户ID&gt;</code> 替换为实际值。</p></details><hr><h3 id="wxpusher-示例" tabindex="-1">wxpusher 示例 <a class="header-anchor" href="#wxpusher-示例" aria-label="Permalink to &quot;wxpusher 示例&quot;">​</a></h3><details><summary>点击展开/收起</summary><p><strong>需提前关注你的应用</strong></p><ul><li><strong>名称</strong>：wxpusher</li><li><strong>URL</strong>：<code>http://wxpusher.zjiecode.com/api/send/message</code></li><li><strong>请求方式</strong>：<code>POST</code></li><li><strong>请求类型</strong>：<code>JSON</code></li><li><strong>Body</strong>：<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;appToken&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;你的appToken&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;topicIds&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;#NEZHA#&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;contentType&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;uids&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;你的uid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ul></details><hr><h3 id="邮件通知示例-使用-sendcloud-贡献者-白歌" tabindex="-1">邮件通知示例（使用 SendCloud，贡献者：<a href="https://github.com/cantoblanco" target="_blank" rel="noreferrer">@白歌</a>） <a class="header-anchor" href="#邮件通知示例-使用-sendcloud-贡献者-白歌" aria-label="Permalink to &quot;邮件通知示例（使用 SendCloud，贡献者：[@白歌](https://github.com/cantoblanco)）&quot;">​</a></h3><details><summary>点击展开/收起</summary><p><strong>注意</strong>：SendCloud 每日有免费发送邮件限额，此处仅作示例。</p><h4 id="获取-url-参数-2" tabindex="-1">获取 URL 参数 <a class="header-anchor" href="#获取-url-参数-2" aria-label="Permalink to &quot;获取 URL 参数&quot;">​</a></h4><ol><li><strong>注册账号</strong>：在 <a href="https://www.sendcloud.net/" target="_blank" rel="noreferrer">SendCloud</a> 注册并登录。</li><li><strong>获取 APIUSER 和 APIKEY</strong>：在账号设置中获取。</li><li><strong>设置发件和收件邮箱</strong>：自定义发件邮箱和收件邮箱。</li></ol><p><strong>通知配置：</strong></p><ul><li><strong>名称</strong>：邮件通知</li><li><strong>URL</strong>：<div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://api.sendcloud.net/apiv2/mail/send?apiUser=&lt;APIUSER&gt;&amp;apiKey=&lt;APIKEY&gt;&amp;from=&lt;发件邮箱&gt;&amp;fromName=Nezha&amp;to=&lt;收件邮箱&gt;&amp;subject=Nezha-Notification&amp;html=#NEZHA#</span></span></code></pre></div></li><li><strong>请求方式</strong>：<code>POST</code></li><li><strong>请求类型</strong>：<code>JSON</code></li><li><strong>Header</strong>：空</li><li><strong>Body</strong>：空</li></ul><p><strong>注意</strong>：替换 <code>&lt;APIUSER&gt;</code>、<code>&lt;APIKEY&gt;</code>、<code>&lt;发件邮箱&gt;</code>、<code>&lt;收件邮箱&gt;</code> 为实际值。</p></details><hr><h3 id="钉钉群机器人配置示例" tabindex="-1">钉钉群机器人配置示例 <a class="header-anchor" href="#钉钉群机器人配置示例" aria-label="Permalink to &quot;钉钉群机器人配置示例&quot;">​</a></h3><details><summary>点击展开/收起</summary><h4 id="获取-url-参数-3" tabindex="-1">获取 URL 参数 <a class="header-anchor" href="#获取-url-参数-3" aria-label="Permalink to &quot;获取 URL 参数&quot;">​</a></h4><ol><li><strong>创建机器人</strong>：在钉钉群的设置中添加机器人，选择自定义关键词方式。</li><li><strong>获取 Webhook URL</strong>：创建完成后获得。</li></ol><p><strong>通知配置：</strong></p><ul><li><strong>名称</strong>：哪吒探针小跟班</li><li><strong>URL</strong>：<code>https://oapi.dingtalk.com/robot/send?access_token=xxxxxxxxxxxxxxxxx</code></li><li><strong>请求方式</strong>：<code>POST</code></li><li><strong>请求类型</strong>：<code>JSON</code></li><li><strong>Header</strong>：<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;Content-Type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;application/json&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li><li><strong>Body</strong>：<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;msgtype&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;text&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;哪吒探针：</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">#NEZHA#&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ul><p><strong>注意</strong>：将 <code>access_token</code> 替换为你的机器人 Token，<code>content</code> 中需包含自定义关键词。</p></details><hr><h3 id="企业微信群机器人示例-贡献者-chowrex" tabindex="-1">企业微信群机器人示例（贡献者：<a href="https://github.com/ChowRex" target="_blank" rel="noreferrer">@ChowRex</a>） <a class="header-anchor" href="#企业微信群机器人示例-贡献者-chowrex" aria-label="Permalink to &quot;企业微信群机器人示例（贡献者：[@ChowRex](https://github.com/ChowRex)）&quot;">​</a></h3><details><summary>点击展开/收起</summary><h4 id="支持的占位符" tabindex="-1">支持的占位符 <a class="header-anchor" href="#支持的占位符" aria-label="Permalink to &quot;支持的占位符&quot;">​</a></h4><table tabindex="0"><thead><tr><th>占位符</th><th>含义</th></tr></thead><tbody><tr><td><code>#NEZHA#</code></td><td>通知内容</td></tr><tr><td><code>#SERVER.NAME#</code></td><td>服务器名称</td></tr><tr><td><code>#SERVER.IP#</code></td><td>服务器 IP</td></tr><tr><td><code>#SERVER.IPV4#</code></td><td>服务器 IPv4 地址</td></tr><tr><td><code>#SERVER.IPV6#</code></td><td>服务器 IPv6 地址</td></tr><tr><td><code>#SERVER.CPU#</code></td><td>CPU 使用率</td></tr><tr><td><code>#SERVER.MEM#</code></td><td>内存使用率</td></tr><tr><td><code>#SERVER.SWAP#</code></td><td>交换分区使用率</td></tr><tr><td><code>#SERVER.DISK#</code></td><td>磁盘使用率</td></tr><tr><td><code>#SERVER.NETINSPEED#</code></td><td>实时上传速度</td></tr><tr><td><code>#SERVER.NETOUTSPEED#</code></td><td>实时下载速度</td></tr><tr><td><code>#SERVER.TRANSFERIN#</code></td><td>总上传流量</td></tr><tr><td><code>#SERVER.TRANSFEROUT#</code></td><td>总下载流量</td></tr><tr><td><code>#SERVER.LOAD1#</code></td><td>1分钟内负载</td></tr><tr><td><code>#SERVER.LOAD5#</code></td><td>5分钟内负载</td></tr><tr><td><code>#SERVER.LOAD15#</code></td><td>15分钟内负载</td></tr></tbody></table><h4 id="配置示例" tabindex="-1">配置示例 <a class="header-anchor" href="#配置示例" aria-label="Permalink to &quot;配置示例&quot;">​</a></h4><ul><li><strong>名称</strong>：企业微信群机器人</li><li><strong>URL</strong>：<code>https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=YOUR_BOT_KEY</code></li><li><strong>请求方式</strong>：<code>POST</code></li><li><strong>请求类型</strong>：<code>JSON</code></li><li><strong>Body</strong>：<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;msgtype&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;markdown&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;markdown&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;# 哪吒通知消息</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">#NEZHA#</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&gt; **名称**: #SERVER.NAME#</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&gt; **IP**: #SERVER.IP#</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&gt; **CPU**: #SERVER.CPU#%</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&gt; **内存**: #SERVER.MEM#%</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&gt; **磁盘**: #SERVER.DISK#%</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ul><p><strong>通知效果预览：</strong></p><p><img src="https://user-images.githubusercontent.com/30169860/223605620-eac53ee6-09f9-4583-94fa-9b0cdedba81c.png" alt="企业微信通知效果"></p></details><hr><h3 id="飞书群机器人配置示例-贡献者-eya46" tabindex="-1">飞书群机器人配置示例（贡献者：<a href="https://github.com/eya46" target="_blank" rel="noreferrer">@eya46</a>） <a class="header-anchor" href="#飞书群机器人配置示例-贡献者-eya46" aria-label="Permalink to &quot;飞书群机器人配置示例（贡献者：[@eya46](https://github.com/eya46)）&quot;">​</a></h3><details><summary>点击展开/收起</summary><h4 id="获取-url-参数-4" tabindex="-1">获取 URL 参数 <a class="header-anchor" href="#获取-url-参数-4" aria-label="Permalink to &quot;获取 URL 参数&quot;">​</a></h4><ol><li><strong>创建机器人</strong>：在飞书群设置中添加自定义机器人（Webhook）。</li><li><strong>获取 Webhook URL</strong>：创建完成后获得。</li></ol><p><strong>通知配置：</strong></p><ul><li><strong>名称</strong>：哪吒面板 Bot</li><li><strong>URL</strong>：<code>https://open.feishu.cn/open-apis/bot/v2/hook/xxxxxxxxxxxxxxxxx</code></li><li><strong>请求方式</strong>：<code>POST</code></li><li><strong>请求类型</strong>：<code>JSON</code></li><li><strong>Body</strong>：<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;msg_type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;text&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;#NEZHA#</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">#DATETIME#&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ul></details><hr><h3 id="matrix-通知示例" tabindex="-1">Matrix 通知示例 <a class="header-anchor" href="#matrix-通知示例" aria-label="Permalink to &quot;Matrix 通知示例&quot;">​</a></h3><details><summary>点击展开/收起</summary><h4 id="参数说明" tabindex="-1">参数说明 <a class="header-anchor" href="#参数说明" aria-label="Permalink to &quot;参数说明&quot;">​</a></h4><ul><li><strong>变量替换</strong>：将以下变量替换为实际值 <ul><li><code>$YOUR_HOME_SERVER</code>：Matrix 服务器地址</li><li><code>$YOUR_NEZHA_URL</code>：你的哪吒面板 URL</li><li><code>$YOUR_MATRIX_USERNAME</code>：Matrix 用户名</li><li><code>$YOUR_MATRIX_PASSWD</code>：Matrix 用户密码</li><li><code>$YOUR_MATRIX_TOKEN</code>：Matrix 访问令牌</li><li><code>$ROOM_ID</code>：Matrix 房间 ID</li></ul></li></ul><h4 id="获取访问令牌" tabindex="-1">获取访问令牌 <a class="header-anchor" href="#获取访问令牌" aria-label="Permalink to &quot;获取访问令牌&quot;">​</a></h4><p>使用以下命令获取 <code>YOUR_MATRIX_TOKEN</code>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -XPOST</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{&quot;type&quot;: &quot;m.login.password&quot;, &quot;identifier&quot;: {&quot;user&quot;: &quot;$YOUR_MATRIX_USERNAME&quot;, &quot;type&quot;: &quot;m.id.user&quot;}, &quot;password&quot;: &quot;$YOUR_MATRIX_PASSWD&quot;}&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;https://</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$YOUR_HOME_SERVER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/_matrix/client/r0/login&quot;</span></span></code></pre></div><h4 id="通知配置" tabindex="-1">通知配置 <a class="header-anchor" href="#通知配置" aria-label="Permalink to &quot;通知配置&quot;">​</a></h4><ul><li><strong>名称</strong>：Matrix</li><li><strong>URL</strong>：<code>https://$YOUR_HOME_SERVER/_matrix/client/r0/rooms/$ROOM_ID/send/m.room.message</code></li><li><strong>请求方式</strong>：<code>POST</code></li><li><strong>请求类型</strong>：<code>JSON</code></li><li><strong>Header</strong>：<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;Authorization&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Bearer $YOUR_MATRIX_TOKEN&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li><li><strong>Body</strong>：<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;msgtype&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;m.text&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;format&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;org.matrix.custom.html&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;formatted_body&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&lt;h1&gt;&lt;a href=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">$YOUR_NEZHA_URL</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> target=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">_blank</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&gt;Nezha Dashboard&lt;/a&gt;&lt;/h1&gt;&lt;ul&gt;&lt;li&gt;时间：#DATETIME#&lt;/li&gt;&lt;li&gt;消息：#NEZHA#&lt;/li&gt;&lt;/ul&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;body&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;#NEZHA#&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ul><p><strong>使用步骤</strong>：</p><ol><li><strong>替换变量</strong>：将所有 <code>$</code> 开头的变量替换为你的实际值。</li><li><strong>获取 Token</strong>：使用上述命令获取 <code>YOUR_MATRIX_TOKEN</code>。</li><li><strong>配置请求</strong>：按照配置填写 URL、Header 和 Body。</li><li><strong>发送通知</strong>：配置完成后，通知将发送到指定的 Matrix 房间。</li></ol></details><hr><h2 id="警报规则说明" tabindex="-1">警报规则说明 <a class="header-anchor" href="#警报规则说明" aria-label="Permalink to &quot;警报规则说明&quot;">​</a></h2><p><strong>在配置警报规则之前，请先配置通知方式，然后在分组设置中为通知方式配置通知组。警报规则将以通知组为单位发送通知。</strong></p><h3 id="基本规则" tabindex="-1">基本规则 <a class="header-anchor" href="#基本规则" aria-label="Permalink to &quot;基本规则&quot;">​</a></h3><ul><li><strong><code>type</code></strong>：可选一个或多个类型，<strong>同时满足</strong>所选类型才会触发通知。 <ul><li><strong>资源类</strong>：<code>cpu</code>、<code>gpu</code>、<code>memory</code>、<code>swap</code>、<code>disk</code></li><li><strong>网络类</strong>：<code>net_in_speed</code>（入站网速）、<code>net_out_speed</code>（出站网速）、<code>net_all_speed</code>（双向网速）、<code>transfer_in</code>（入站流量）、<code>transfer_out</code>（出站流量）、<code>transfer_all</code>（双向流量）</li><li><strong>系统类</strong>：<code>offline</code>（离线监控）、<code>load1</code>、<code>load5</code>、<code>load15</code>（负载）、<code>process_count</code>（进程数）</li><li><strong>连接数</strong>：<code>tcp_conn_count</code>、<code>udp_conn_count</code></li><li><strong>温度</strong>：<code>temperature_max</code>（最高温度值）</li></ul></li><li><strong><code>duration</code></strong>：持续时间（秒），在此时间内采样记录 30% 以上触发阈值才会通知（防止数据波动引起误报）。</li><li><strong><code>min</code> / <code>max</code></strong>： <ul><li>流量、网速类单位为字节（1KB=1024B，1MB=1024*1024B）。</li><li>内存、硬盘、CPU 使用百分比（0-100）。</li><li>离线监控无需设置此项。</li></ul></li><li><strong><code>cover</code></strong>： <ul><li><code>0</code>：监控所有服务器，可通过 <code>ignore</code> 忽略特定服务器。</li><li><code>1</code>：忽略所有服务器，可通过 <code>ignore</code> 选择特定服务器进行监控。</li></ul></li><li><strong><code>ignore</code></strong>：与 <code>cover</code> 配合使用，指定服务器的监控策略，格式为 <code>{服务器ID: true/false}</code>。</li></ul><p><strong>示例</strong>：</p><ul><li><p><strong>离线通知</strong>：</p><ul><li><strong>名称</strong>：离线通知</li><li><strong>规则</strong>：<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;Type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;offline&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;Duration&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}]</span></span></code></pre></div></li><li><strong>启用</strong>：√</li></ul></li><li><p><strong>CPU 和内存监控</strong>：</p><ul><li><strong>名称</strong>：CPU+内存</li><li><strong>规则</strong>：<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;Type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cpu&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;Min&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;Max&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;Duration&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;Type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;memory&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;Min&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;Max&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;Duration&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div></li><li><strong>启用</strong>：√</li></ul></li><li><p><strong>特定服务器通知发送到指定通知组</strong>：</p><ul><li><p><strong>场景</strong>：服务器 1、2 离线 10 分钟后发送通知到通知组 A，服务器 3、4 离线 10 分钟后发送通知到通知组 B。</p></li><li><p><strong>规则一（通知组 A）</strong>：</p><ul><li><strong>名称</strong>：1、2 离线通知</li><li><strong>规则</strong>：<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;Type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;offline&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;Duration&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">600</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;Cover&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;Ignore&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}}]</span></span></code></pre></div></li><li><strong>通知组</strong>：A</li><li><strong>启用</strong>：√</li></ul></li><li><p><strong>规则二（通知组 B）</strong>：</p><ul><li><strong>名称</strong>：3、4 离线通知</li><li><strong>规则</strong>：<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;Type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;offline&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;Duration&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">600</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;Cover&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;Ignore&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;4&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}}]</span></span></code></pre></div></li><li><strong>通知组</strong>：B</li><li><strong>启用</strong>：√</li></ul></li></ul></li></ul><h3 id="特殊规则-任意周期流量通知" tabindex="-1">特殊规则：任意周期流量通知 <a class="header-anchor" href="#特殊规则-任意周期流量通知" aria-label="Permalink to &quot;特殊规则：任意周期流量通知&quot;">​</a></h3><p>可用于月流量监控。</p><ul><li><strong><code>type</code></strong>： <ul><li><code>transfer_in_cycle</code>：周期内入站流量</li><li><code>transfer_out_cycle</code>：周期内出站流量</li><li><code>transfer_all_cycle</code>：周期内双向流量总和</li></ul></li><li><strong><code>cycle_start</code></strong>：统计周期开始日期，格式为 RFC3339，例如 <code>2022-01-01T00:00:00+08:00</code>。</li><li><strong><code>cycle_interval</code></strong>：统计周期数量（如每 1 个月为一个周期）。</li><li><strong><code>cycle_unit</code></strong>：统计周期单位，可选 <code>hour</code>、<code>day</code>、<code>week</code>、<code>month</code>、<code>year</code>。</li><li><strong><code>min</code> / <code>max</code></strong>、<code>cover</code>、<code>ignore</code> 同基本规则。</li></ul><p><strong>示例</strong>：</p><ul><li><p><strong>月流量超限通知</strong>：</p><ul><li><p><strong>规则</strong>：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;Type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;transfer_out_cycle&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;Max&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1099511627776</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;Cycle_start&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2022-01-01T00:00:00+08:00&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;Cycle_interval&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;Cycle_unit&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;month&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;Cover&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;Ignore&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;4&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div></li><li><p><strong>说明</strong>：服务器 3、4 的出站月流量超过 1TB 时触发通知，统计周期从每月 1 号开始。</p></li></ul></li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>如果对通知配置有疑问，可以使用以下第三方配置生成器简化操作（哪吒监控不对第三方生成器的功能性作任何保证）：</p><ul><li><a href="https://nz.sina.us.kg/" target="_blank" rel="noreferrer">Nezha Rule Generator</a>：适用于大多数场景。</li><li><a href="https://wiziscool.github.io/Nezha-Traffic-Alarm-Generator/" target="_blank" rel="noreferrer">Nezha-Traffic-Alarm-Generator</a>：专注于周期流量通知规则生成。</li></ul></div><hr><h2 id="通知触发模式" tabindex="-1">通知触发模式 <a class="header-anchor" href="#通知触发模式" aria-label="Permalink to &quot;通知触发模式&quot;">​</a></h2><ul><li><strong>总是</strong>：每当 Agent 上报的状态符合通知规则时，都会触发一次通知。</li><li><strong>仅一次</strong>：仅在状态变化时触发通知，如从正常变为异常，或从异常恢复为正常。</li></ul><hr><h2 id="设置通知时执行任务" tabindex="-1">设置通知时执行任务 <a class="header-anchor" href="#设置通知时执行任务" aria-label="Permalink to &quot;设置通知时执行任务&quot;">​</a></h2><p>如果需要在发送通知的同时执行特定任务，可以进行如下设置：</p><ul><li><strong>总是执行任务</strong>：当通知状态从“正常”变为“异常”时，执行指定任务（需提前在任务页设置）。</li><li><strong>仅一次执行任务</strong>：当通知状态从“异常”恢复为“正常”时，执行指定任务（需提前在任务页设置）。</li></ul>`,55),e=[l];function o(h,r,p,k,d,g){return t(),i("div",null,e)}const u=s(n,[["render",o]]);export{c as __pageData,u as default};
