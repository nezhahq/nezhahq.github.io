# Agent 启动/上线 问题自检流程
1. `nc -v 域名/IP 通讯端口` 或者 `telnet 域名/IP 通讯端口` 来检验是否是网络问题，检查本机与面板服务器的出入站防火墙，如果无法判断问题可借助 <https://port.ping.pe/> 提供的端口检查工具进行检测。
2. 如果上面步骤检测正常，Agent 依然没有正常上线，请尝试关闭 SELinux，[如何关闭 SELinux？](https://www.google.com/search?q=%E5%85%B3%E9%97%ADSELINUX)
3. 使用 `systemctl status nezha-agent-*` 查看 Agent 运行日志，以进一步排查.
5. 检查gRPC服务通信路径是否正常，可以使用以下的命令
    ```shell
    curl http://你的IP或者域名:端口/proto.NezhaService/ -H "Content-Type:application/grpc" -X POST -v
    ```
   正常的响应体可能如下：
   ```plain
    < HTTP/2 200
    < content-type: application/grpc
    <
    < grpc-message: unknown method  for service proto.NezhaService
    < grpc-status: 12
	```
    有两点关键的信息，响应包的`content-type`是否是`application/grpc`、是否有grpc-message相关的报错信息字样。
    
    如果返回的类型不对，就说明没办法正常连接到gRPC服务，Agent没办法正常使用，需要检查流量路径，例如反向代理配置。
    
