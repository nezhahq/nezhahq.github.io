---
outline: deep
---

**å“ªå’ç›‘æ§çš„è¢«æ§ç«¯æœåŠ¡è¢«ç§°ä¸º Agentï¼Œæœ¬æ–‡æ¡£å°†ä»‹ç»å¦‚ä½•åœ¨è¢«æ§ç«¯æœåŠ¡å™¨ä¸Šå®‰è£… Agentï¼Œå¹¶ä¸ Dashboard è¿æ¥**  
::: tip  
Agent äºŒè¿›åˆ¶æ–‡ä»¶ä»“åº“åœ°å€ä¸ºï¼š<https://github.com/nezhahq/agent/releases>
:::

## ä¸€é”®å®‰è£… Agent

ç›®å‰å“ªå’ç›‘æ§å·²æ”¯æŒåœ¨ Windows å’Œ Linuxä¸Šä¸€é”®å®‰è£… Agentï¼Œéµå¾ªæœ¬æ–‡æ¡£çš„æ­¥éª¤ï¼Œä½ å¯ä»¥å¾ˆè½»æ¾çš„åœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²å®ƒ  
<br/>

### å‡†å¤‡å·¥ä½œ

ä½ éœ€è¦æå‰åœ¨ç®¡ç†é¢æ¿ä¸­è®¾ç½®å¥½é€šä¿¡åŸŸåï¼Œæ­¤åŸŸåä¸å¯ä»¥æ¥å…¥CDNï¼Œè¿™é‡Œä»¥ç¤ºä¾‹é€šä¿¡åŸŸå â€œdata.example.comâ€ æ¥åšæ¼”ç¤º  
è¿›å…¥åå°ç®¡ç†é¢æ¿ï¼Œè½¬åˆ°â€œè®¾ç½®â€é¡µï¼Œåœ¨â€œæœªæ¥å…¥ CDN çš„é¢æ¿æœåŠ¡å™¨åŸŸå/IPâ€é¡¹ä¸­å¡«å…¥é€šä¿¡åŸŸåï¼Œç„¶åç‚¹å‡»"ä¿å­˜"  
<br/>

### åœ¨ Linux ä¸­ä¸€é”®å®‰è£… (Ubuntuã€Debianã€CentOS)
* é¦–å…ˆåœ¨ç®¡ç†é¢æ¿ä¸­æ·»åŠ ä¸€å°æœåŠ¡å™¨
* ç‚¹å‡»æ–°æ·»åŠ çš„æœåŠ¡å™¨æ—ï¼Œç»¿è‰²çš„ Linux å›¾æ ‡æŒ‰é’®ï¼Œå¤åˆ¶ä¸€é”®å®‰è£…å‘½ä»¤
* åœ¨è¢«æ§ç«¯æœåŠ¡å™¨ä¸­è¿è¡Œå¤åˆ¶çš„ä¸€é”®å®‰è£…å‘½ä»¤ï¼Œç­‰å¾…å®‰è£…å®Œæˆåè¿”å›åˆ° Dashboard ä¸»é¡µæŸ¥çœ‹æœåŠ¡å™¨æ˜¯å¦ä¸Šçº¿  
<br/>

### åœ¨ Windows ä¸­ä¸€é”®å®‰è£…

* é¦–å…ˆåœ¨ç®¡ç†é¢æ¿ä¸­æ·»åŠ ä¸€å°æœåŠ¡å™¨
* ç‚¹å‡»æ–°æ·»åŠ çš„æœåŠ¡å™¨æ—ï¼Œç»¿è‰²çš„ Windows å›¾æ ‡æŒ‰é’®ï¼Œå¤åˆ¶ä¸€é”®å®‰è£…å‘½ä»¤
* è¿›å…¥ Windows æœåŠ¡å™¨ï¼Œè¿è¡Œ PowerShellï¼Œåœ¨ PowerShell ä¸­è¿è¡Œå¤åˆ¶çš„å®‰è£…å‘½ä»¤
* å¦‚é‡åˆ°ç¡®è®¤ã€Œæ‰§è¡Œç­–ç•¥å˜æ›´ã€è¯·é€‰æ‹© Y
* ç­‰å¾…å®‰è£…å®Œæˆåè¿”å› Dashboard ä¸»é¡µæŸ¥çœ‹æœåŠ¡å™¨æ˜¯å¦ä¸Šçº¿  
<br/>  
:::warning  
å¦‚æœåœ¨ Powershell ä¸­è¿è¡Œä¸€é”®å®‰è£…å‘½ä»¤æ—¶é‡åˆ°é”™è¯¯ï¼Œè¯·å°è¯•ä¸‹æ–¹çš„**åœ¨ Windows ä¸­æ‰‹åŠ¨å®‰è£… Agent**  
:::  

<br/>

## å…¶ä»–æ–¹å¼å®‰è£… Agent

### åœ¨ Linux ä¸­å®‰è£… Agent (Ubuntuã€Debianã€CentOS)
<details>
  <summary>ç‚¹å‡»å±•å¼€/æ”¶èµ·</summary>

* é¦–å…ˆåœ¨ç®¡ç†é¢æ¿ä¸­æ·»åŠ ä¸€å°æœåŠ¡å™¨  
* åœ¨è¢«æ§æœåŠ¡å™¨ä¸­ï¼Œè¿è¡Œè„šæœ¬ï¼ˆä½äºä¸­å›½å¤§é™†çš„æœåŠ¡å™¨è¯·ä½¿ç”¨é•œåƒï¼‰ï¼š

```bash
curl -L https://raw.githubusercontent.com/naiba/nezha/master/script/install.sh  -o nezha.sh && chmod +x nezha.sh && sudo ./nezha.sh
```

å¦‚æœä½ çš„è¢«æ§æœåŠ¡å™¨ä½äºä¸­å›½å¤§é™†ï¼Œå¯ä»¥ä½¿ç”¨é•œåƒï¼š  

````bash
curl -L https://gitee.com/naibahq/nezha/raw/master/script/install.sh -o nezha.sh && chmod +x nezha.sh && sudo CN=true ./nezha.sh
````

* é€‰æ‹©â€œå®‰è£…ç›‘æ§ Agentâ€  
* è¾“å…¥é€šä¿¡åŸŸåï¼Œå¦‚ï¼šâ€data.example.comâ€œ  
* è¾“å…¥é¢æ¿é€šä¿¡ç«¯å£ï¼ˆgRPC ç«¯å£ï¼‰ï¼Œé»˜è®¤ä¸º 5555  
* è¾“å…¥ Agent å¯†é’¥ï¼ŒAgent å¯†é’¥åœ¨ç®¡ç†é¢æ¿ä¸­æ·»åŠ æœåŠ¡å™¨æ—¶ç”Ÿæˆï¼Œå¯ä»¥åœ¨ç®¡ç†é¢æ¿ä¸­çš„â€œæœåŠ¡å™¨â€é¡µä¸­æ‰¾åˆ°  
* ç­‰å¾…å®‰è£…å®Œæˆåè¿”å› Dashboard ä¸»é¡µæŸ¥çœ‹æœåŠ¡å™¨æ˜¯å¦ä¸Šçº¿  
</details>
<br/>  

### åœ¨ å…¶ä»– Linux å¦‚ Alpine ä½¿ç”¨ Openrc çš„å‘è¡Œç‰ˆ å®‰è£… Agent
<details>
  <summary>ç‚¹å‡»å±•å¼€/æ”¶èµ·</summary>
  
æœ¬èŠ‚å†…å®¹ç”± [unknown0054](https://github.com/unknwon0054) è´¡çŒ®

* ä¿®æ”¹ SERVERã€SECRETã€TLS ç„¶ååœ¨ shell ä¸­æ‰§è¡Œ

```shell
cat >/etc/init.d/nezha-agent<< EOF
#!/sbin/openrc-run
SERVER="" #Dashboard åœ°å€ ip:port
SECRET="" #SECRET
TLS="" # æ˜¯å¦å¯ç”¨ tls æ˜¯ "--tls" å¦ç•™ç©º
NZ_BASE_PATH="/opt/nezha"
NZ_AGENT_PATH="${NZ_BASE_PATH}/agent"
pidfile="/run/${RC_SVCNAME}.pid"
command="/opt/nezha/agent/nezha-agent"
command_args="-s ${SERVER}  -p ${SECRET} ${TLS}"
command_background=true
depend() {
 need net
}
checkconfig() {
 GITHUB_URL="github.com"
 if [ ! -f "${NZ_AGENT_PATH}/nezha-agent" ]; then
  if [[ $(uname -m | grep 'x86_64') != "" ]]; then
   os_arch="amd64"
  elif [[ $(uname -m | grep 'i386\|i686') != "" ]]; then
   os_arch="386"
  elif [[ $(uname -m | grep 'aarch64\|armv8b\|armv8l') != "" ]]; then
   os_arch="arm64"
  elif [[ $(uname -m | grep 'arm') != "" ]]; then
   os_arch="arm"
  elif [[ $(uname -m | grep 's390x') != "" ]]; then
   os_arch="s390x"
  elif [[ $(uname -m | grep 'riscv64') != "" ]]; then
   os_arch="riscv64"
  fi
  local version=$(curl -m 10 -sL "https://api.github.com/repos/nezhahq/agent/releases/latest" | grep "tag_name" | head -n 1 | awk -F ":" '{print $2}' | sed 's/\"//g;s/,//g;s/ //g')
  if [ ! -n "$version" ]; then
   version=$(curl -m 10 -sL "https://fastly.jsdelivr.net/gh/nezhahq/agent/" | grep "option\.value" | awk -F "'" '{print $2}' | sed 's/nezhahq\/agent@/v/g')
  fi
  if [ ! -n "$version" ]; then
   version=$(curl -m 10 -sL "https://gcore.jsdelivr.net/gh/nezhahq/agent/" | grep "option\.value" | awk -F "'" '{print $2}' | sed 's/nezhahq\/agent@/v/g')
  fi
  if [ ! -n "$version" ]; then
   echo -e "è·å–ç‰ˆæœ¬å·å¤±è´¥ï¼Œè¯·æ£€æŸ¥æœ¬æœºèƒ½å¦é“¾æ¥ https://api.github.com/repos/nezhahq/agent/releases/latest"
   return 0
  else
   echo -e "å½“å‰æœ€æ–°ç‰ˆæœ¬ä¸º: ${version}"
  fi
  wget -t 2 -T 10 -O nezha-agent_linux_${os_arch}.zip https://${GITHUB_URL}/nezhahq/agent/releases/download/${version}/nezha-agent_linux_${os_arch}.zip >/dev/null 2>&1
  if [[ $? != 0 ]]; then
   echo -e "Release ä¸‹è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥æœ¬æœºèƒ½å¦è¿æ¥ ${GITHUB_URL}${plain}"
   return 0
  fi
  mkdir -p $NZ_AGENT_PATH
  chmod 755 -R $NZ_AGENT_PATH
  unzip -qo nezha-agent_linux_${os_arch}.zip && mv nezha-agent $NZ_AGENT_PATH && rm -rf nezha-agent_linux_${os_arch}.zip README.md
 fi
 if [ ! -x "${NZ_AGENT_PATH}/nezha-agent" ]; then
  chmod +x ${NZ_AGENT_PATH}/nezha-agent
 fi
}
start_pre() {
 if [ "${RC_CMD}" != "restart" ]; then
  checkconfig || return $?
 fi
}
EOF
```

* å¢åŠ è¿è¡Œæƒé™

  ```shell
  chmod +x /etc/init.d/nezha-agent
  ```

* è¿è¡Œ Nezha-Agent

  ```shell
  rc-service nezha-agent start
  ```

* æ·»åŠ å¼€æœºè‡ªå¯åŠ¨

  ```shell
  rc-update add nezha-agent
  ```
</details>

### åœ¨ Windows ä¸­æ‰‹åŠ¨å®‰è£… Agent  

* è¯·å‚è€ƒç¤¾åŒºæ–‡ç« ï¼š  
[å“ªå’æ¢é’ˆ - Windows å®¢æˆ·ç«¯å®‰è£…](https://nyko.me/2020/12/13/nezha-windows-client.html)  
<br/>  

### åœ¨ ç¾¤æ™–DSM ä¸­å®‰è£… Agent  
<details>
  <summary>ç‚¹å‡»å±•å¼€/æ”¶èµ·</summary>

* è¯·å‚è€ƒç¤¾åŒºæ–‡ç« ï¼š  
[ç¾¤æ™– DSM 7.x å®‰è£… å“ªå’ç›‘æ§ Agent](https://blog.mitsea.com/3929551d08bd4bb0a8baa453e2d92b0c/)  
[å“ªå’æ¢é’ˆâ€”â€”ç¾¤æ™–å®¢æˆ·ç«¯ï¼ˆè¢«æ§ç«¯ï¼‰å®‰è£…æ•™ç¨‹](https://wl.gta5pdx.cn/archives/546/)  

* Systemd å®ç° *ä»…é€‚ç”¨äº DSM7*:

  ```sh
  # å®¢æˆ·ç«¯è·¯å¾„
  EXEC="/PATH/TO/nezha-agent"
  # æ—¥å¿—è·¯å¾„åœ°å€
  LOG="${EXEC}.log"
  # é¢å¤–æ‰§è¡Œå‚æ•°, å¯ç•™ç©º
  ARGS="--disable-command-execute"
  # å“ªå’æœåŠ¡ç«¯gRPCåœ°å€
  SERVER="HOST_OR_IP:gRPC_PORT"
  # ä¸Šä¸€æ­¥è·å–çš„ä¸»æœºå¯†é’¥
  SECRET="APP_SECRET"
  # æœåŠ¡è¿è¡Œç”¨æˆ·å, *å¼ºçƒˆå»ºè®®ä½¿ç”¨érootç”¨æˆ·æ‰§è¡Œ*
  RUN_USER="nezha"

  # å†™å…¥åˆ°systemdæœåŠ¡æ–‡ä»¶
  cat << EOF > /usr/lib/systemd/system/nezha.service
  [Unit]
  Description=Nezha Agent Service
  After=network.target

  [Service]
  Type=simple
  ExecStart=/bin/nohup ${EXEC} ${ARGS} -s ${SERVER} -p ${SECRET} &>> ${LOG} &
  ExecStop=ps -fe |grep nezha-agent|awk '{print \$2}'|xargs kill
  User=${RUN_USER}
  Restart=on-abort

  [Install]
  WantedBy=multi-user.target
  EOF

  # é‡è½½æœåŠ¡
  systemctl daemon-reload
  # å¯åŠ¨æœåŠ¡
  systemctl start nezha
  # æœåŠ¡è‡ªå¯åŠ¨
  systemctl enable nezha
  ```

  â€¼ï¸ä¿®æ”¹å¯¹åº”ä¿¡æ¯åâ€¼ï¸
  
  ä½¿ç”¨ `root` è´¦å·æ‰§è¡Œä¸Šè¿°å‘½ä»¤å³å¯å®‰è£…å®Œæˆ
</details>
<br/>

### åœ¨ macOS ä¸­å®‰è£… Agent  
<details>
  <summary>ç‚¹å‡»å±•å¼€/æ”¶èµ·</summary>

***æœ¬èŠ‚å†…å®¹æ”¹ç¼–è‡ª [Mitsea Blog](https://blog.mitsea.com/e796f93db38d49e4b18df234c6ee75f5)ï¼Œæ”¹ç¼–å·²è·å¾—åŸä½œè€…æˆæƒ***  
<br/>  
::: warning  
å®‰è£…è¿‡ç¨‹ä¸­å¦‚æç¤ºâ€œmacOS æ— æ³•éªŒè¯æ­¤ appâ€œï¼Œè¯·å‰å¾€ç³»ç»Ÿè®¾ç½®æ‰‹åŠ¨å…è®¸ç¨‹åºè¿è¡Œ  
:::  

* é¦–å…ˆåœ¨ç®¡ç†é¢æ¿ä¸­æ·»åŠ ä¸€å°æœåŠ¡å™¨  
* å‰å¾€ [Release](https://github.com/nezhahq/agent/releases) é¡µä¸‹è½½ Agent äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ ¹æ® CPU æ¶æ„é€‰æ‹©ä¸‹è½½ darwin amd64 è¿˜æ˜¯ arm64 çš„ Agent  
å¦‚ Intel CPU ä¸‹è½½ amd64ï¼ŒApple Silicon ä¸‹è½½ arm64 ç‰ˆæœ¬ã€‚ä¸‹è½½å®Œæˆåè§£å‹ Agent äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¦‚è§£å‹åˆ°ä¸‹è½½æ–‡ä»¶å¤¹  
* æ–°å»ºä¸€ä¸ªåä¸º `nezha_agent.plist` çš„æ–‡ä»¶å¹¶ä¿å­˜ï¼Œä¿®æ”¹æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š  

```xml  
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
 <key>KeepAlive</key>
 <true/>
 <key>Label</key>
 <string>nezha_agent</string>
 <key>Program</key>
 <string>åœ¨è¿™é‡Œä¿®æ”¹ Agent äºŒè¿›åˆ¶æ–‡ä»¶çš„çš„è·¯å¾„ï¼Œå¦‚ï¼š/Users/123/Downloads/nezha-agent</string>
 <key>ProgramArguments</key>
 <array>
  <string>åœ¨è¿™é‡Œä¿®æ”¹ Agent äºŒè¿›åˆ¶æ–‡ä»¶çš„çš„è·¯å¾„ï¼ŒåŒä¸Š</string>
  <string>--password</string>
  <string>é€šä¿¡å¯†é’¥ï¼Œå¦‚ï¼š529664783eeb23cc25</string>
  <string>--server</string>
  <string>é€šä¿¡ç½‘å€å’ŒgRPCç«¯å£ï¼Œå¦‚:data.example.com:5555</string>
 </array>
 <key>RunAtLoad</key>
 <true/>
</dict>
</plist>
```

+ åœ¨ Terminal ä¸­ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤åŠ è½½ plist æ–‡ä»¶åˆ° launchd é‡Œï¼Œ**æ³¨æ„æ›¿æ¢æ–‡ä»¶è·¯å¾„**  

```shell  
launchctl load /Users/123/Desktop/nezha_agent.plist
```

+ å¯åŠ¨è¿›ç¨‹  

```shell  
launchctl start nezha_agent
```

+ æ£€æŸ¥è¿›ç¨‹æ˜¯å¦è¿è¡Œ  

```shell  
launchctl list | grep nezha_agent
```

+ åœæ­¢è¿›ç¨‹å¹¶ç§»é™¤

```shell  
launchctl stop nezha_agent
```

```shell  
launchctl remove nezha_agent
```
</details>
<br/>  

### åœ¨ macOS ä¸­ä½¿ç”¨ Homebrew å®‰è£… Agent
<details>
  <summary>ç‚¹å‡»å±•å¼€/æ”¶èµ·</summary>

***æœ¬èŠ‚å†…å®¹æ”¹ç¼–è‡ª [ğŸ¿ï¸æ¾é¼ æ”¶é›†ğŸŒ°](https://blog.mre.red/archives/install_nezha_monitoring_agent_service_with_homebrew)ï¼Œæ”¹ç¼–å·²è·å¾—åŸä½œè€…æˆæƒ***

::: danger
è¯·åŠ¡å¿…å…ˆæ·»åŠ ç¯å¢ƒå˜é‡ï¼Œå†é€šè¿‡ Homebrew å®‰è£… nezha-agent ï¼
å›  Homebrew åœ¨è½¯ä»¶å®‰è£…æ—¶åˆ›å»ºæœåŠ¡æ‰€éœ€ plist æ–‡ä»¶ï¼Œè‹¥å…ˆå®‰è£…å†æ·»åŠ ç¯å¢ƒå˜é‡ï¼Œä¼šå› ç¼ºå°‘å‚æ•°è€Œå¯åŠ¨å¤±è´¥ï¼
:::

* æ·»åŠ ç¯å¢ƒå˜é‡

```sh
echo 'export HOMEBREW_NEZHA_AGENT_PASSWORD="é€šä¿¡å¯†é’¥ï¼Œåœ¨æœåŠ¡é¡µé¢è·å–"' >> ~/.zshrc
echo 'export HOMEBREW_NEZHA_AGENT_SERVER="ä½ çš„æœåŠ¡å™¨å’Œç«¯å£ï¼Œæ ¼å¼ your.domain:5555 "' >> ~/.zshrc
source ~/.zshrc
```

* å®‰è£… Nezha Agent

::: danger
è¯·æ³¨æ„ï¼Œæ­¤ Homebrew ä»“åº“ç”±ç¬¬ä¸‰æ–¹ç»´æŠ¤ï¼Œä¸å“ªå’ç›‘æ§æ— å…³ã€‚
Nezha é¡¹ç›®ç»„ä¸å¯¹è¯¥ä»“åº“çš„å¯ç”¨æ€§å’Œå®‰å…¨æ€§ç­‰æ–¹é¢ä½œå‡ºèƒŒä¹¦ã€‚åœ¨ä½¿ç”¨å‰ï¼Œè¯·è‡ªè¡Œè¯„ä¼°é£é™©ï¼ï¼
:::

*ç”±äºæš‚æœªæäº¤åˆ° Homebrew Core å®˜æ–¹åº“ï¼Œæš‚æ—¶æ”¾åœ¨ä¸Šè¿°åšå®¢ä½œè€…å‚ä¸ç»´æŠ¤çš„ [ç¬¬ä¸‰æ–¹ Homebrew ä»“åº“](https://github.com/Brewforge/homebrew-chinese) ä¸­*

```sh
brew install brewforge/chinese/nezha-agent
```

* é€šè¿‡ Homebrew å¯åŠ¨ Nezha Agent æœåŠ¡

```sh
brew services start nezha-agent
```

* æ£€æŸ¥æœåŠ¡çŠ¶æ€

```sh
brew services info nezha-agent
```

* åœæ­¢æœåŠ¡

```sh
brew services stop nezha-agent
```

* å¸è½½ Nezha Agent

```sh
brew rm nezha-agent
```

* æŠ¥é”™æ—¶å…ˆæ£€æŸ¥ç¯å¢ƒå˜é‡

```sh
echo $HOMEBREW_NEZHA_AGENT_PASSWORD
echo $HOMEBREW_NEZHA_AGENT_SERVER
```

* è‹¥ç¯å¢ƒå˜é‡é…ç½®æ­£ç¡®ï¼Œå†å°è¯•é‡è£…

```sh
brew services stop nezha-agent
brew reinstall nezha-agent
brew services start nezha-agent
```

* è‹¥ä»æœªè§£å†³ï¼Œè¯·å‰å¾€ä¸Šè¿° [ç¬¬ä¸‰æ–¹ Homebrew ä»“åº“](https://github.com/Brewforge/homebrew-chinese) æäº¤å·¥å•

</details>
<br/>

### åœ¨ OpenWRT ä¸­å®‰è£… Agent  
<details>
  <summary>ç‚¹å‡»å±•å¼€/æ”¶èµ·</summary>

**å¦‚ä½• ä¸€æ­¥åˆ°ä½,è§£å†³å®‰è£…è¿‡ç¨‹ç–‘éš¾æ‚ç—‡**  
* è¯·å‚è€ƒé¡¹ç›®ï¼š  
[NZ-OpenWrt](https://github.com/dysf888/NZ-OpenWrt)  
<br/>

**å¦‚ä½•ä½¿ æ—§ç‰ˆ OpenWRT/LEDE è‡ªå¯åŠ¨**  
* è¯·å‚è€ƒé¡¹ç›®ï¼š  
[å“ªå’ç›‘æ§ For OpenWRT](https://github.com/Erope/openwrt_nezha)  
<br/>

**å¦‚ä½•ä½¿ æ–°ç‰ˆ OpenWRT è‡ªå¯åŠ¨ï¼Ÿæ¥è‡ª @è‰¾æ–¯å¾·æ–¯**  

* é¦–å…ˆåœ¨ release ä¸‹è½½å¯¹åº”çš„äºŒè¿›åˆ¶è§£å‹ zip åŒ…åæ”¾ç½®åˆ° `/root`  
* è¿è¡Œ `chmod +x /root/nezha-agent` èµ‹äºˆæ‰§è¡Œæƒé™ï¼Œç„¶ååˆ›å»º `/etc/init.d/nezha-service`ï¼š

```shell
#!/bin/sh /etc/rc.common

START=99
USE_PROCD=1

start_service() {
 procd_open_instance
 procd_set_param command /root/nezha-agent -s é¢æ¿é€šä¿¡åœ°å€:ç«¯å£ -p ç§˜é’¥ -d
 procd_set_param respawn
 procd_close_instance
}

stop_service() {
    killall nezha-agent
}

restart() {
 stop
 sleep 2
 start
}
```

* è¿è¡Œ `chmod +x /etc/init.d/nezha-service` èµ‹äºˆæ‰§è¡Œæƒé™  
* å¯åŠ¨æœåŠ¡ï¼š `/etc/init.d/nezha-service enable && /etc/init.d/nezha-service start`  
</details>
<br/>

## å¸¸è§é—®é¢˜

### Agent æœ‰ Docker é•œåƒå—ï¼Ÿ

**Agent ç›®å‰æ²¡æœ‰æ¨å‡º Docker é•œåƒã€‚**  
Agent çš„è®¾è®¡æ€è·¯å’Œ Dashboard ç›¸åï¼ŒDashboard è¦å°½å¯èƒ½ä¸å½±å“å®¿ä¸»æœºå·¥ä½œï¼Œä½† Agent åˆ™éœ€è¦åœ¨å®¿ä¸»æœºä¸­æ‰§è¡Œç›‘æ§æœåŠ¡å’Œè¿è¡Œå‘½ä»¤ã€‚  
å°† Agent æ”¾å…¥å®¹å™¨ä¸­ç¡®å®å¯ä»¥ç»§ç»­æ‰§è¡Œç›‘æ§ä»»åŠ¡ï¼Œä½† WebShell ç­‰åŠŸèƒ½æ— æ³•æ­£å¸¸è¿è¡Œï¼Œå› æ­¤ä¸æä¾› Docker é•œåƒã€‚  
