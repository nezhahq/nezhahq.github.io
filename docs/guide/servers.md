---
outline: deep
---

# 服务器

## 介绍

服务器区域负责管理 Agent，是哪吒探针最基础的功能模块，同时也是其他功能的核心基础。

---

## 安装命令

请参考前文 [安装 Agent](/guide/agent.html)。  
推荐使用**一键安装方式**：

1. 配置好必要的参数。
2. 在 Dashboard 的服务器页面中点击`安装命令`图标。
3. 复制生成的安装命令并在对应服务器上运行完成安装。

---

## 强制更新

Agent 的更新行为由以下两个参数控制：

- `disable-auto-update`：关闭自动更新。
- `disable-force-update`：禁用强制更新。

### 默认行为

在默认情况下，Agent 会自动更新，无需手动干预。

### 手动强制更新

如果用户关闭了自动更新功能，可以通过选择指定服务器并执行**强制更新**操作来更新 Agent。  
**注意**：当 `disable-force-update` 参数启用时，强制更新功能将失效。

---

## 数据列说明

Dashboard 中服务器页面的数据列字段说明：

- **版本**：显示当前 Agent 的版本号。
- **启用动态域名解析**：为 `True` 时，Dashboard 会在服务器 IP 变更时自动更新 DNS 记录。
- **对游客隐藏**：为 `True` 时，此服务器在面板中对游客不可见。
- **备注**：
  - **私有备注**：仅通过身份验证的用户可见。
  - **公开备注**：所有用户均可见，适合展示通用信息。
  - 用户可根据需要自定义备注内容，具体参考 [公开备注设置](#公开备注设置)。
- **命令行**：提供 WebShell 和文件列表功能。用户可直接通过 Dashboard 远程运行命令、管理文件，并支持文件上传和下载。

---

## 编辑配置

可以点击操作列的齿轮图标编辑对应服务器的 Agent 配置。

如果使用批量编辑，对应 Agent 配置将不会被获取，需要自己手动填写配置项。

成功向服务器发送任务后，Agent 会在 10 秒后应用配置并重载服务。

---

## 在线终端

在线终端（WebShell）允许用户通过 Dashboard 远程访问服务器的命令行界面，支持 Linux 和 Windows 系统。

- **快捷操作**：可使用 `Ctrl+Shift+V` 粘贴命令。
- **限制说明**：当 `disable-command-execute` 参数启用时，在线终端功能将不可用。
- **连接问题**：若连接失败，请参考 [Websocket 连接失败](/guide/q4.html) 文档解决。

---

---

## 文件列表

::: info

此功能仅支持 \*nix 系统

:::

文件列表提供了一个类似文件管理器的界面，可以供用户浏览文件，并在当前目录进行上传下载操作。
支持目录跳转、刷新和复制当前路径操作，与在线终端搭配使用更为方便。

---

---

## DDNS

在勾选 `DDNS` 复选框后, 你可以填写以下两个字段：

### DDNS 配置文件 ID

请参考 [DDNS](/guide/ddns.html) 文档先添加一个基础配置，添加完成后你可以在面板中看到对应的 `DDNS 配置 ID`。

### 强制指定 DDNS 域名

你可以使用本功能复用 DDNS 配置文件而无需将 Token 复制多遍。

这应该是一个简单的 JSON 对象，你应该提供一组键值对，键为使用双引号进行包裹的 `DDNS 配置 ID`，此处指定的 ID 必须在 `DDNS 配置文件 ID` 字段中指定过, 而值应当为一个域名数组，你可以提供多个域名，在这里的设置将会覆盖你在 `DDNS 配置` 中设置的默认域名。

```json
{
  "1": ["sub.example.domain"]
}
```

---

---

## 公开备注设置

哪吒监控支持在 Dashboard 设置自定义的公开信息，用于前端自定义。

---

### 示例配置（默认主题）

以下是公开备注的 JSON 配置示例：

```json
{
  "billingDataMod": {
    "startDate": "2024-12-08T12:58:17.636Z",
    "endDate": "2024-12-08T12:58:17.636Z",
    "autoRenewal": "1",
    "cycle": "Year",
    "amount": "200EUR"
  },
  "planDataMod": {
    "bandwidth": "30Mbps",
    "trafficVol": "1TB/Month",
    "trafficType": "2",
    "IPv4": "1",
    "IPv6": "1",
    "networkRoute": "4837",
    "extra": "Einstein"
  }
}
```

#### 配置字段说明

1. **账单信息 `billingDataMod`**：

   - **`startDate`**：账单起始日期（ISO 时间格式）。
   - **`endDate`**：账单结束日期（ISO 时间格式）。
   - **`autoRenewal`**：自动续费状态，`1` 表示启用。
   - **`cycle`**：账单周期（如 `月`、`年`）。
   - **`amount`**：账单金额及货币单位。

2. **流量和网络配置 `planDataMod`**：
   - **`bandwidth`**：服务器带宽信息。
   - **`trafficVol`**：流量配额及周期。
   - **`trafficType`**：流量类型，`1` 表示入站，`2` 表示双向。
   - **`IPv4` / `IPv6`**：支持的 IPv4 或 IPv6 地址数量。
   - **`networkRoute`**：网络路由信息（如 AS4837）。
   - **`extra`**：额外备注字段，可用于填写其他信息。

---

::: tip
**使用工具轻松配置**  
如果您不熟悉 JSON 配置规则，可以使用以下第三方公开备注生成器快速生成配置：
[公开备注生成器](https://nezhainfojson.pages.dev/)

将生成的 JSON 复制到 Dashboard 对应的公开备注设置中，保存后即可在面板前台展示相关信息。
:::
