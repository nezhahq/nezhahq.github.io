# 真实 IP 请求头

由于 V1 版本引入了本地账户机制，为防止外界暴力破解登录接口（Web 应用防火墙功能），程序需要准确获取客户端的真实 IP 地址。  
此功能可通过路径 **`/dashboard/settings/waf`** 进行管理配置。

---

## 配置场景

根据服务部署方式的不同，有以下两种配置场景：

### 1. 直接将面板服务映射至公网

- 勾选 **`使用直连 IP`** 即可，无需额外配置。

---

### 2. 使用 Web 容器反向代理或 CDN

- 参考 [反向代理配置](/guide/q3.html) 文档。
- 在示例配置中，使用了 `nz-realip` 请求头，您可以沿用或修改为其他自定义值。
- 确保代理服务器正确设置请求头，并将客户端 IP 地址通过自定义头部传递给 Dashboard。

---

## 常见问题

### Q1: 配置错误导致无法访问面板或探针掉线，如何恢复？

1. 修改面板配置文件：  
   文件路径为 `/data/config.yaml`，找到以下配置项：
   ```yaml
   realipheader: ""
   ```
   将 `realipheader` 设置为空值（`""`），保存并退出。

2. 重启面板服务。

3. 重新访问面板并验证连接是否恢复正常。

